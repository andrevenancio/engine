<!DOCTYPE html>
<html lang="en">
    <head>
        <title>engine</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            html, body {
                margin: 0;
                background-color: #000;
            }
        </style>
    </head>
    <body>
        <script src="/webpack-dev-server.js"></script>
        <script src="/lib/engine.js"></script>
        <script>
            var renderer, scene, camera;
            var controls;
            var model;

            setup();

            function setup() {
                renderer = new engine.Renderer();
                renderer.setSize(window.innerWidth, window.innerHeight);

                camera = new engine.cameras.Perspective();

                scene = new engine.Scene();

                controls = new engine.controls.Orbit(camera, renderer);

                engine.loaders.Obj.load('/dev/cube.obj', init);
            }

            function init(data) {
                data = engine.utils.geometry.mergeVertices(data);

                let material = new engine.materials.Basic({ color: 0xff0000 });
                model = new engine.Model(data, material);
                model.scale.x = model.scale.y = model.scale.z = 0.5;
                scene.addModel(model);

                material = new engine.materials.Basic({ color: 0x00ff00 });
                const second = new engine.Model(data, material);
                second.scale.x = second.scale.y = second.scale.z = 0.5;
                scene.addModel(second);

                update();
            }

            function update() {
                requestAnimationFrame(update);
                renderer.render(scene, camera);
                model.position.x = Math.cos(Date.now() / 500) * 50;
                model.position.y = Math.sin(Date.now() / 500) * 50;
                controls.update();
            }

        </script>
    </body>
</html>
