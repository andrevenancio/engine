!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("engine",[],e):"object"==typeof exports?exports.engine=e():t.engine=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/lib/",e(e.s=19)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(e.library="lowww WebGL engine",e.version="0.0.3",e.env="build",void 0),a=void 0,o=void 0,i=void 0;e.setContext=function(t){r=t,a=t.TRIANGLES,o=t.LINES,i=t.POINTS},e.getContext=function(){return r},e.GL_TRIANGLES=function(){return a},e.GL_LINES=function(){return o},e.GL_POINTS=function(){return i}},function(t,e,n){e.glMatrix=n(2),e.mat2=n(21),e.mat2d=n(22),e.mat3=n(14),e.mat4=n(23),e.quat=n(24),e.vec2=n(25),e.vec3=n(15),e.vec4=n(16)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BASIC_MATERIAL=100,e.FLATSHADING_MATERIAL=101,e.SEM_MATERIAL=102,e.RAW_MATERIAL=103,e.AMBIENT_LIGHT=200,e.DIRECTIONAL_LIGHT=201,e.POINT_LIGHT=202,e.MAX_DIRECTIONAL=2},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),i=n(29),u=function(t){return t&&t.__esModule?t:{default:t}}(i),l=0,s=0,c=o.vec3.create(),f=o.vec3.create(),h=o.vec3.create(),d=o.vec3.create(),M=function(){function t(){r(this,t),this.uid=l++,this.position=new u.default,this.rotation=new u.default,this.scale=new u.default(1,1,1),this.quaternion=o.quat.create(),this.target=o.vec3.create(),this.up=o.vec3.fromValues(0,1,0),this.parent=null,this.children=[],this.parentMatrix=o.mat4.create(),this.modelMatrix=o.mat4.create(),this.lookAtMatrix=o.mat4.create(),this.lookToTarget=!1}return a(t,[{key:"addModel",value:function(t){t.parent=this,this.children.push(t)}},{key:"removeModel",value:function(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1))}},{key:"lookAt",value:function(t,e,n,r){return o.vec3.subtract(d,n,e),o.vec3.normalize(d,d),o.vec3.cross(f,r,d),o.vec3.cross(h,d,f),t[0]=f[0],t[1]=f[1],t[2]=f[2],t[3]=0,t[4]=h[0],t[5]=h[1],t[6]=h[2],t[7]=0,t[8]=d[0],t[9]=d[1],t[10]=d[2],t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},{key:"updateMatrices",value:function(){o.mat4.identity(this.parentMatrix),o.mat4.identity(this.modelMatrix),o.mat4.identity(this.lookAtMatrix),o.quat.identity(this.quaternion),this.parent&&(o.mat4.copy(this.parentMatrix,this.parent.modelMatrix),o.mat4.multiply(this.modelMatrix,this.modelMatrix,this.parentMatrix)),this.lookToTarget?(this.lookAt(this.lookAtMatrix,this.position.data,this.target,this.up),o.mat4.multiply(this.modelMatrix,this.modelMatrix,this.lookAtMatrix)):(o.mat4.translate(this.modelMatrix,this.modelMatrix,this.position.data),o.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),o.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),o.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),s=o.quat.getAxisAngle(c,this.quaternion),o.mat4.rotate(this.modelMatrix,this.modelMatrix,s,c)),o.mat4.scale(this.modelMatrix,this.modelMatrix,this.scale.data)}}]),t}();e.default=M},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FOG=e.DIRECTIONAL=e.UBO=void 0;var r=n(36),a=n(37),o=n(38);e.UBO=r.UBO,e.DIRECTIONAL=a.DIRECTIONAL,e.FOG=o.FOG},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(0),c=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.geometry={positions:new Float32Array(t.positions),indices:new Uint16Array(t.indices),normals:new Float32Array(t.normals||t.positions.length),uvs:new Float32Array(t.uvs||t.positions.length/1.5)},o.material=n,o.material.attributes.a_position.value=o.geometry.positions,o.material.attributes.a_normal.value=o.geometry.normals,o.material.attributes.a_uv.value=o.geometry.uvs,o.material.indices=o.geometry.indices,o.positionsNeedUpdate=!1,o}return o(e,t),i(e,[{key:"init",value:function(){this.material.init()}},{key:"bind",value:function(){this.material.bind()}},{key:"update",value:function(){if(this.material.update(),!0===this.positionsNeedUpdate){var t=(0,s.getContext)();t.enableVertexAttribArray(this.material.attributes.a_position.location),t.bindBuffer(t.ARRAY_BUFFER,this.material.attributes.a_position.buffer),t.bufferData(t.ARRAY_BUFFER,this.geometry.positions,t.DYNAMIC_DRAW)}this.draw()}},{key:"unbind",value:function(){this.material.unbind()}},{key:"draw",value:function(){var t=(0,s.getContext)();this.geometry.indices.length>0?t.drawElements(this.material.glMode(),this.geometry.indices.length,t.UNSIGNED_SHORT,0):t.drawArrays(this.material.glMode(),0,this.geometry.positions.length/3)}},{key:"destroy",value:function(){this.material.destroy()}}]),e}(l.default);e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=(0,o.getContext)();Object.assign(this,{magFilter:n.NEAREST,minFilter:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE},e);var a=new Uint8Array([0,0,0,255]);this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),n.bindTexture(n.TEXTURE_2D,null)}return a(t,[{key:"fromImage",value:function(t){var e=this,n=new Image;n.crossOrigin="",n.onload=function(){e.update(n)},n.src=t}},{key:"update",value:function(t){var e=(0,o.getContext)();e.bindTexture(e.TEXTURE_2D,this.texture),e.generateMipmap(e.TEXTURE_2D),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),l=n(9),s=n(10),c=r(s),f=n(7),h=r(f),d=n(5),M=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=u.BASIC_MATERIAL,n.map=new h.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{color:{type:"vec3",value:l.color.convert(t&&t.color||16777215)},map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+d.UBO.scene()+"\n"+d.UBO.model()+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+u.MAX_DIRECTIONAL+"\n\nprecision highp float;\nprecision highp int;\n\nin vec2 v_uv;\nin vec3 v_normal;\n\n"+d.UBO.scene()+"\n"+d.UBO.model()+"\n\n"+d.DIRECTIONAL.before()+"\n\nuniform vec3 color;\nuniform sampler2D map;\n\n\nout vec4 outColor;\n\nvoid main() {\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n    base += vec4(color, 1.0);\n\n    outColor = base;\n}",n}return i(e,t),e}(c.default);e.default=M},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.color=e.math=e.geometry=void 0;var a=n(11),o=r(a),i=n(17),u=r(i),l=n(33),s=r(l);e.geometry=o,e.math=u,e.color=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=n(35),l=n(0),s={},c=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,t),this.defines={},this.attributes=Object.assign({a_position:{type:"vec3",value:null},a_normal:{type:"vec3",value:null},a_uv:{type:"vec2",value:null}}),this.uniforms={},this.vertex="",this.fragment="",this.vao=new i.default,this.program=null,this.indices=null,this.glMode=l.GL_TRIANGLES}return a(t,[{key:"createProgram",value:function(){var t=(0,l.getContext)(),e="shader-"+this.type;if(void 0===s[e]){var n=(0,u.createProgram)(t,this.vertex,this.fragment);s[e]=n}this.program=s[e]}},{key:"initAttributes",value:function(){var t=(0,l.getContext)();for(var e in this.attributes){var n=this.attributes[e],r=t.getAttribLocation(this.program,e),a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,n.value,t.DYNAMIC_DRAW);var o=void 0;switch(n.type){case"vec3":o=3;break;case"vec2":o=2;break;default:o=1}Object.assign(n,{location:r,buffer:a,size:o})}this.indices&&(this.indexBuffer=t.createBuffer())}},{key:"initUniforms",value:function(){var t=this,e=(0,l.getContext)(),n=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5];Object.keys(this.uniforms).forEach(function(r,a){var o=t.uniforms[r],i=e.getUniformLocation(t.program,r);"sampler2D"===o.type&&(o.textureIndex=a,o.activeTexture=n[a]),o.location=i})}},{key:"init",value:function(){this.createProgram(),this.initAttributes(),this.initUniforms(),this.vao.bind(),this.bind(),this.vao.unbind(),this.unbind()}},{key:"destroy",value:function(){}},{key:"bind",value:function(){var t=this,e=(0,l.getContext)();Object.keys(this.attributes).forEach(function(n){var r=t.attributes[n],a=r.location,o=r.buffer,i=r.size;-1!==a&&(e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(a,i,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null))}),this.indices&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW))}},{key:"unbind",value:function(){var t=(0,l.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=this,e=(0,l.getContext)();Object.keys(this.uniforms).forEach(function(n){var r=t.uniforms[n];switch(r.type){case"mat4":e.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":e.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":e.uniform4fv(r.location,r.value);break;case"vec3":e.uniform3fv(r.location,r.value);break;case"vec2":e.uniform2fv(r.location,r.value);break;case"float":e.uniform1f(r.location,r.value);break;case"sampler2D":e.uniform1i(r.location,r.textureIndex),e.activeTexture(r.activeTexture),e.bindTexture(e.TEXTURE_2D,r.value);break;default:console.warn("unknown uniform type",r.type)}})}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(r(t[n])):e.push(t[n]);return e}function a(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var a=[],o=0;o<e;o++)a.push(t[r+o]);n.push(a)}return n}function o(t,e){for(var n=a(e,3),o=a(t,3),i=[],l=u.vec3.create(),s=u.vec3.create(),c=u.vec3.create(),f=void 0,h=void 0,d=void 0,M=0;M<n.length;M++){var v=n[M],p=v[0],m=v[1],b=v[2];f=o[p],h=o[m],d=o[b],u.vec3.subtract(l,d,h),u.vec3.subtract(s,f,h),u.vec3.cross(c,l,s),void 0===i[p]&&(i[p]=u.vec3.create()),void 0===i[m]&&(i[m]=u.vec3.create()),void 0===i[b]&&(i[b]=u.vec3.create()),u.vec3.add(i[p],i[p],c),u.vec3.add(i[m],i[m],c),u.vec3.add(i[b],i[b],c)}for(var x=0;x<i.length;x++)u.vec3.normalize(i[x],i[x]);return r(i,3)}function i(t){for(var e=a(t.positions,3),n={},i=[],u=[],l=Math.pow(10,4),s=0;s<e.length;s++){var c=e[s],f="\n            "+Math.round(c[0]*l)+"_\n            "+Math.round(c[1]*l)+"_\n            "+Math.round(c[2]*l)+"\n        ";void 0===n[f]?(n[f]=s,i.push(e[s]),u[s]=i.length-1):u[s]=u[n[f]]}for(var h=[],d=a(t.indices,3),M=0;M<d.length;M++){var v=d[M];v[0]=u[v[0]],v[1]=u[v[1]],v[2]=u[v[2]];for(var p=[v[0],v[1],v[2]],m=0;m<3;m++)if(p[m]===p[(m+1)%3]){h.push(M);break}}for(var b=h.length-1;b>=0;b--){var x=h[b];d.splice(x,1);for(var I=0;I<this.faceVertexUvs.length;I++)this.faceVertexUvs[I].splice(x,1)}var y=r(i,3),S=r(d,3);return{positions:new Float32Array(y),indices:new Uint16Array(S),normals:new Float32Array(o(y,S))}}Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=r,e.unflatten=a,e.generateVertexNormals=o,e.mergeVertices=i;var u=n(1)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return a(t,null,[{key:"load",value:function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})}}]),t}();e.default=o},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,n,a,o,i,u,l,s){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=a,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},a.set=function(t,e,n,r,a,o,i,u,l,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=c*i-u*s,h=-c*o+u*l,d=s*o-i*l,M=n*f+r*h+a*d;return M?(M=1/M,t[0]=f*M,t[1]=(-c*r+a*s)*M,t[2]=(u*r-a*i)*M,t[3]=h*M,t[4]=(c*n-a*l)*M,t[5]=(-u*n+a*o)*M,t[6]=d*M,t[7]=(-s*n+r*l)*M,t[8]=(i*n-r*o)*M,t):null},a.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=a*s-r*c,t[2]=r*u-a*i,t[3]=u*l-o*c,t[4]=n*c-a*l,t[5]=a*o-n*u,t[6]=o*s-i*l,t[7]=r*l-n*s,t[8]=n*i-r*o,t},a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+n*(-s*a+i*u)+r*(l*a-o*u)},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=n[0],d=n[1],M=n[2],v=n[3],p=n[4],m=n[5],b=n[6],x=n[7],I=n[8];return t[0]=h*r+d*i+M*s,t[1]=h*a+d*u+M*c,t[2]=h*o+d*l+M*f,t[3]=v*r+p*i+m*s,t[4]=v*a+p*u+m*c,t[5]=v*o+p*l+m*f,t[6]=b*r+x*i+I*s,t[7]=b*a+x*u+I*c,t[8]=b*o+x*l+I*f,t},a.mul=a.multiply,a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*r+d*i+s,t[7]=h*a+d*u+c,t[8]=h*o+d*l+f,t},a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*l,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},a.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,l=a+a,s=n*i,c=r*i,f=r*u,h=a*i,d=a*u,M=a*l,v=o*i,p=o*u,m=o*l;return t[0]=1-f-M,t[3]=c-m,t[6]=h+p,t[1]=c+m,t[4]=1-s-M,t[7]=d-v,t[2]=h-p,t[5]=d+v,t[8]=1-s-f,t},a.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],M=e[12],v=e[13],p=e[14],m=e[15],b=n*u-r*i,x=n*l-a*i,I=n*s-o*i,y=r*l-a*u,S=r*s-o*u,_=a*s-o*l,D=c*v-f*M,g=c*p-h*M,F=c*m-d*M,E=f*p-h*v,w=f*m-d*v,O=h*m-d*p,R=b*O-x*w+I*E+y*F-S*g+_*D;return R?(R=1/R,t[0]=(u*O-l*w+s*E)*R,t[1]=(l*F-i*O-s*g)*R,t[2]=(i*w-u*F+s*D)*R,t[3]=(a*w-r*O-o*E)*R,t[4]=(n*O-a*F+o*g)*R,t[5]=(r*F-n*w-o*D)*R,t[6]=(v*_-p*S+m*y)*R,t[7]=(p*I-M*_-m*x)*R,t[8]=(M*S-v*I+m*b)*R,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=e[0],d=e[1],M=e[2],v=e[3],p=e[4],m=e[5],b=t[6],x=e[7],I=e[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-M)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(l-m)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(s-b)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))},t.exports=a},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,n){var a=new r.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=n,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2];return t[0]=a*l-o*u,t[1]=o*i-r*l,t[2]=r*u-a*i,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},a.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+n[0]*l+r[0]*s+a[0]*c,t[1]=e[1]*u+n[1]*l+r[1]*s+a[1]*c,t[2]=e[2]*u+n[2]*l+r[2]*s+a[2]*c,t},a.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=e[0]*s+n[0]*c+r[0]*f+a[0]*h,t[1]=e[1]*s+n[1]*c+r[1]*f+a[1]*h,t[2]=e[2]*s+n[2]*c+r[2]*f+a[2]*h,t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=a*e,t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2],s=n[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-l*o;return t[0]=c*s+d*-i+f*-l-h*-u,t[1]=f*s+d*-u+h*-i-c*-l,t[2]=h*s+d*-l+c*-u-f*-i,t},a.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),a.angle=function(t,e){var n=a.fromValues(t[0],t[1],t[2]),r=a.fromValues(e[0],e[1],e[2]);a.normalize(n,n),a.normalize(r,r);var o=a.dot(n,r);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],l=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=a},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},a.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2],s=n[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-l*o;return t[0]=c*s+d*-i+f*-l-h*-u,t[1]=f*s+d*-u+h*-i-c*-l,t[2]=h*s+d*-l+c*-u-f*-i,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,l;for(n||(n=4),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=a},function(t,e,n){"use strict";function r(t,e,n){return Math.max(Math.min(t,n),e)}function a(t){return 0==(t&t-1)}function o(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=r,e.isPowerOf2=a,e.randomRange=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function t(e,n){r(this,t);var a=[];return a.push(e[0]||0,e[1]||0,e[2]||0),a.push(n[0]||0,n[1]||0,n[2]||0),{positions:a,indices:[]}};e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.chunks=e.loaders=e.helpers=e.utils=e.controls=e.lights=e.geometry=e.material=e.Texture=e.Model=e.Scene=e.cameras=e.Renderer=e.constants=e.session=void 0;var o=n(0),i=a(o),u=n(20),l=r(u),s=n(27),c=a(s),f=n(31),h=r(f),d=n(6),M=r(d),v=n(7),p=r(v),m=n(32),b=a(m),x=n(42),I=a(x),y=n(46),S=a(y),_=n(48),D=a(_),g=n(9),F=a(g),E=n(50),w=a(E),O=n(53),R=a(O),T=n(3),A=a(T),P=n(5),j=a(P);e.session=i,e.constants=A,e.Renderer=l.default,e.cameras=c,e.Scene=h.default,e.Model=M.default,e.Texture=p.default,e.material=b,e.geometry=I,e.lights=S,e.controls=D,e.utils=F,e.helpers=R,e.loaders=w,e.chunks=j},function(t,e,n){"use strict";(function(t){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=n(0),l=n(26),s=function(t){return t&&t.__esModule?t:{default:t}}(l),c=n(3),f=!1,h=void 0,d=void 0,M=i.mat4.create(),v=i.mat4.create(),p=i.mat4.create(),m=Date.now(),b=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.ratio=t.devicePixelRatio,this.fog={start:500,end:1e3,color:i.vec4.fromValues(0,0,0,1),density:.002};var o=n.canvas||this.createCanvas(),l=o.getContext("webgl2",{antialias:!1});if(l){if(!1!==n.greeting){var h,d="color:#f33;font-size:x-small",M=["%c"+u.library+"\n%cversion: %c"+u.version+" %crunning: %c"+l.getParameter(l.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",d,"color:#777;font-size:x-small",d];(h=console).log.apply(h,M)}(0,u.setContext)(l),this.perScene=new s.default([].concat(r(i.mat4.create()),r(i.mat4.create()),r(i.vec4.create()),r(i.vec4.create()),r(i.vec4.create())),0),this.perModel=new s.default([].concat(r(i.mat4.create()),r(i.mat4.create())),1),this.directional=new s.default(new Float32Array(12*c.MAX_DIRECTIONAL),2),this.frameBuffer=l.createFramebuffer(),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBuffer),this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR_MIPMAP_NEAREST),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,256,256,0,l.RGBA,l.UNSIGNED_BYTE,null),this.renderBuffer=l.createRenderbuffer(),l.bindRenderbuffer(l.RENDERBUFFER,this.renderBuffer),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,256,256),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.texture,0),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,this.renderBuffer),l.bindTexture(l.TEXTURE_2D,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),f=!0}else alert("webgl2 not supported")}return o(e,[{key:"createCanvas",value:function(){var e=document.createElement("canvas");return e.style.display="block",e.style.boxSizing="border-box",e.style.width=t.innerWidth*t.devicePixelRatio,e.style.height=t.innerHeight*t.devicePixelRatio,document.body.appendChild(e),e}},{key:"setSize",value:function(t,e){var n=t*this.ratio,r=e*this.ratio,a=(0,u.getContext)();a.canvas.width=n,a.canvas.height=r,a.canvas.style.width=n/this.ratio+"px",a.canvas.style.height=r/this.ratio+"px"}},{key:"setRatio",value:function(t){this.ratio=t}},{key:"renderObject",value:function(t){void 0===t&&(t=this);for(var e=0;e<t.children.length;e+=1)this.renderObject(t.children[e]);if(null!==t.parent){var n=(0,u.getContext)();if(h=t,h.material){if(!h.material.program)return void h.init();if(d!==h.material.program){d=h.material.program,n.useProgram(d);var a=n.getUniformBlockIndex(d,"perScene"),o=n.getUniformBlockIndex(d,"perModel"),l=n.getUniformBlockIndex(d,"directional");n.uniformBlockBinding(d,a,this.perScene.boundLocation),n.uniformBlockBinding(d,o,this.perModel.boundLocation),n.uniformBlockBinding(d,l,this.directional.boundLocation)}i.mat4.identity(p),i.mat4.copy(p,v),i.mat4.transpose(p,p),h.bind(),this.perModel.update([].concat(r(h.modelMatrix),r(p))),h.update(),h.unbind(),h=null}}}},{key:"draw",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(f){var a=(0,u.getContext)();a.viewport(0,0,a.canvas.width,a.canvas.height),n&&(a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),a.enable(a.CULL_FACE),a.enable(a.DEPTH_TEST),e.updateCameraMatrix(a.canvas.width,a.canvas.height),i.mat4.identity(M),i.mat4.lookAt(M,e.position.data,e.target,e.up),i.mat4.identity(v),i.mat4.invert(v,M),t.traverse(),this.perScene.update([].concat(r(e.projectionMatrix),r(M),[this.fog.start,this.fog.end,this.fog.density,0],r(this.fog.color),[(Date.now()-m)/1e3,0,0,0]));for(var o=0;o<c.MAX_DIRECTIONAL;o++)this.directional.update([].concat(r(t.directional[o]&&t.directional[o].position.data||[0,0,0]),[0]).concat([].concat(r(t.directional[o]&&t.directional[o].color||[0,0,0]),[0]),[t.directional[o]&&t.directional[o].intensity||0,0,0,0]),12*o);this.renderObject(t)}}},{key:"render",value:function(t,e){this.draw(t,e)}},{key:"rtt",value:function(t,e,n,r){var a=(0,u.getContext)();if(n!==this.rttwidth||r!==this.rttheight){var o=n*this.ratio,i=r*this.ratio;a.bindTexture(a.TEXTURE_2D,this.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,o,i,0,a.RGBA,a.UNSIGNED_BYTE,null),a.bindTexture(a.TEXTURE_2D,null),a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n*this.ratio,r*this.ratio),a.bindRenderbuffer(a.RENDERBUFFER,null),this.rttwidth=n,this.rttheight=r}return a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),this.draw(t,e),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.texture),a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null),a.bindRenderbuffer(a.RENDERBUFFER,null),a.bindFramebuffer(a.FRAMEBUFFER,null),this.texture}}]),e}();e.default=b}).call(e,n(13))},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},a.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*u+o*l,t[1]=a*u+i*l,t[2]=r*s+o*c,t[3]=a*s+i*c,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*u,t[1]=a*l+i*u,t[2]=r*-u+o*l,t[3]=a*-u+i*l,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*l,t[3]=i*l,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},t.exports=a},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,n,a,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=n*o-r*a;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-a*l,t[3]=n*l,t[4]=(a*u-o*i)*l,t[5]=(r*i-n*u)*l,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1],f=n[2],h=n[3],d=n[4],M=n[5];return t[0]=r*s+o*c,t[1]=a*s+i*c,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*M+u,t[5]=a*d+i*M+l,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*s,t[1]=a*c+i*s,t[2]=r*-s+o*c,t[3]=a*-s+i*c,t[4]=u,t[5]=l,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1];return t[0]=r*s,t[1]=a*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*c+u,t[5]=a*s+i*c+l,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],f=e[2],h=e[3],d=e[4],M=e[5];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))},t.exports=a},function(t,e,n){var r=n(2),a={scalar:{},SIMD:{}};a.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,n,a,o,i,u,l,s,c,f,h,d,M,v,p){var m=new r.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=a,m[4]=o,m[5]=i,m[6]=u,m[7]=l,m[8]=s,m[9]=c,m[10]=f,m[11]=h,m[12]=d,m[13]=M,m[14]=v,m[15]=p,m},a.set=function(t,e,n,r,a,o,i,u,l,s,c,f,h,d,M,v,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=d,t[13]=M,t[14]=v,t[15]=p,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var n,r,a,o,i,u,l,s,c,f;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,f),t},a.transpose=r.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],M=e[12],v=e[13],p=e[14],m=e[15],b=n*u-r*i,x=n*l-a*i,I=n*s-o*i,y=r*l-a*u,S=r*s-o*u,_=a*s-o*l,D=c*v-f*M,g=c*p-h*M,F=c*m-d*M,E=f*p-h*v,w=f*m-d*v,O=h*m-d*p,R=b*O-x*w+I*E+y*F-S*g+_*D;return R?(R=1/R,t[0]=(u*O-l*w+s*E)*R,t[1]=(a*w-r*O-o*E)*R,t[2]=(v*_-p*S+m*y)*R,t[3]=(h*S-f*_-d*y)*R,t[4]=(l*F-i*O-s*g)*R,t[5]=(n*O-a*F+o*g)*R,t[6]=(p*I-M*_-m*x)*R,t[7]=(c*_-h*I+d*x)*R,t[8]=(i*w-u*F+s*D)*R,t[9]=(r*F-n*w-o*D)*R,t[10]=(M*S-v*I+m*b)*R,t[11]=(f*I-c*S-d*b)*R,t[12]=(u*g-i*E-l*D)*R,t[13]=(n*E-r*g+a*D)*R,t[14]=(v*x-M*y-p*b)*R,t[15]=(c*y-f*x+h*b)*R,t):null},a.SIMD.invert=function(t,e){var n,r,a,o,i,u,l,s,c,f,h=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),M=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(M,v,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,d,2,3,6,7),o=SIMD.Float32x4.shuffle(M,v,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),f=SIMD.Float32x4.mul(n,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,c)),t):null},a.invert=r.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],M=e[12],v=e[13],p=e[14],m=e[15];return t[0]=u*(h*m-d*p)-f*(l*m-s*p)+v*(l*d-s*h),t[1]=-(r*(h*m-d*p)-f*(a*m-o*p)+v*(a*d-o*h)),t[2]=r*(l*m-s*p)-u*(a*m-o*p)+v*(a*s-o*l),t[3]=-(r*(l*d-s*h)-u*(a*d-o*h)+f*(a*s-o*l)),t[4]=-(i*(h*m-d*p)-c*(l*m-s*p)+M*(l*d-s*h)),t[5]=n*(h*m-d*p)-c*(a*m-o*p)+M*(a*d-o*h),t[6]=-(n*(l*m-s*p)-i*(a*m-o*p)+M*(a*s-o*l)),t[7]=n*(l*d-s*h)-i*(a*d-o*h)+c*(a*s-o*l),t[8]=i*(f*m-d*v)-c*(u*m-s*v)+M*(u*d-s*f),t[9]=-(n*(f*m-d*v)-c*(r*m-o*v)+M*(r*d-o*f)),t[10]=n*(u*m-s*v)-i*(r*m-o*v)+M*(r*s-o*u),t[11]=-(n*(u*d-s*f)-i*(r*d-o*f)+c*(r*s-o*u)),t[12]=-(i*(f*p-h*v)-c*(u*p-l*v)+M*(u*h-l*f)),t[13]=n*(f*p-h*v)-c*(r*p-a*v)+M*(r*h-a*f),t[14]=-(n*(u*p-l*v)-i*(r*p-a*v)+M*(r*l-a*u)),t[15]=n*(u*h-l*f)-i*(r*h-a*f)+c*(r*l-a*u),t},a.SIMD.adjoint=function(t,e){var n,r,a,o,i,u,l,s,c,f,h,d,M,n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(a,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),d),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),d),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,M),t},a.adjoint=r.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],d=t[12],M=t[13],v=t[14],p=t[15];return(e*i-n*o)*(f*p-h*v)-(e*u-r*o)*(c*p-h*M)+(e*l-a*o)*(c*v-f*M)+(n*u-r*i)*(s*p-h*d)-(n*l-a*i)*(s*v-f*d)+(r*l-a*u)*(s*M-c*d)},a.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(t,8,h);var d=SIMD.Float32x4.load(n,12),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,M),t},a.scalar.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],d=e[10],M=e[11],v=e[12],p=e[13],m=e[14],b=e[15],x=n[0],I=n[1],y=n[2],S=n[3];return t[0]=x*r+I*u+y*f+S*v,t[1]=x*a+I*l+y*h+S*p,t[2]=x*o+I*s+y*d+S*m,t[3]=x*i+I*c+y*M+S*b,x=n[4],I=n[5],y=n[6],S=n[7],t[4]=x*r+I*u+y*f+S*v,t[5]=x*a+I*l+y*h+S*p,t[6]=x*o+I*s+y*d+S*m,t[7]=x*i+I*c+y*M+S*b,x=n[8],I=n[9],y=n[10],S=n[11],t[8]=x*r+I*u+y*f+S*v,t[9]=x*a+I*l+y*h+S*p,t[10]=x*o+I*s+y*d+S*m,t[11]=x*i+I*c+y*M+S*b,x=n[12],I=n[13],y=n[14],S=n[15],t[12]=x*r+I*u+y*f+S*v,t[13]=x*a+I*l+y*h+S*p,t[14]=x*o+I*s+y*d+S*m,t[15]=x*i+I*c+y*M+S*b,t},a.multiply=r.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,n){var r,a,o,i,u,l,s,c,f,h,d,M,v=n[0],p=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*p+e[8]*m+e[12],t[13]=e[1]*v+e[5]*p+e[9]*m+e[13],t[14]=e[2]*v+e[6]*p+e[10]*m+e[14],t[15]=e[3]*v+e[7]*p+e[11]*m+e[15]):(r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],d=e[10],M=e[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=f,t[9]=h,t[10]=d,t[11]=M,t[12]=r*v+u*p+f*m+e[12],t[13]=a*v+l*p+h*m+e[13],t[14]=o*v+s*p+d*m+e[14],t[15]=i*v+c*p+M*m+e[15]),t},a.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},a.translate=r.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,n){var r,a,o,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=r.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,n,a){var o,i,u,l,s,c,f,h,d,M,v,p,m,b,x,I,y,S,_,D,g,F,E,w,O=a[0],R=a[1],T=a[2],A=Math.sqrt(O*O+R*R+T*T);return Math.abs(A)<r.EPSILON?null:(A=1/A,O*=A,R*=A,T*=A,o=Math.sin(n),i=Math.cos(n),u=1-i,l=e[0],s=e[1],c=e[2],f=e[3],h=e[4],d=e[5],M=e[6],v=e[7],p=e[8],m=e[9],b=e[10],x=e[11],I=O*O*u+i,y=R*O*u+T*o,S=T*O*u-R*o,_=O*R*u-T*o,D=R*R*u+i,g=T*R*u+O*o,F=O*T*u+R*o,E=R*T*u-O*o,w=T*T*u+i,t[0]=l*I+h*y+p*S,t[1]=s*I+d*y+m*S,t[2]=c*I+M*y+b*S,t[3]=f*I+v*y+x*S,t[4]=l*_+h*D+p*g,t[5]=s*_+d*D+m*g,t[6]=c*_+M*D+b*g,t[7]=f*_+v*D+x*g,t[8]=l*F+h*E+p*w,t[9]=s*F+d*E+m*w,t[10]=c*F+M*E+b*w,t[11]=f*F+v*E+x*w,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+s*r,t[5]=i*a+c*r,t[6]=u*a+f*r,t[7]=l*a+h*r,t[8]=s*a-o*r,t[9]=c*a-i*r,t[10]=f*a-u*r,t[11]=h*a-l*r,t},a.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateX=r.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-s*r,t[1]=i*a-c*r,t[2]=u*a-f*r,t[3]=l*a-h*r,t[8]=o*r+s*a,t[9]=i*r+c*a,t[10]=u*r+f*a,t[11]=l*r+h*a,t},a.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,a))),t},a.rotateY=r.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+s*r,t[1]=i*a+c*r,t[2]=u*a+f*r,t[3]=l*a+h*r,t[4]=s*a-o*r,t[5]=c*a-i*r,t[6]=f*a-u*r,t[7]=h*a-l*r,t},a.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateZ=r.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,n){var a,o,i,u=n[0],l=n[1],s=n[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,a=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*a,t[2]=s*u*i-l*a,t[3]=0,t[4]=u*l*i-s*a,t[5]=l*l*i+o,t[6]=s*l*i+u*a,t[7]=0,t[8]=u*s*i+l*a,t[9]=l*s*i-u*a,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,l=a+a,s=o+o,c=r*u,f=r*l,h=r*s,d=a*l,M=a*s,v=o*s,p=i*u,m=i*l,b=i*s;return t[0]=1-(d+v),t[1]=f+b,t[2]=h-m,t[3]=0,t[4]=f-b,t[5]=1-(c+v),t[6]=M+p,t[7]=0,t[8]=h+m,t[9]=M-p,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},a.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],l=a+a,s=o+o,c=i+i,f=a*l,h=a*s,d=a*c,M=o*s,v=o*c,p=i*c,m=u*l,b=u*s,x=u*c,I=r[0],y=r[1],S=r[2];return t[0]=(1-(M+p))*I,t[1]=(h+x)*I,t[2]=(d-b)*I,t[3]=0,t[4]=(h-x)*y,t[5]=(1-(f+p))*y,t[6]=(v+m)*y,t[7]=0,t[8]=(d+b)*S,t[9]=(v-m)*S,t[10]=(1-(f+M))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,f=u+u,h=o*s,d=o*c,M=o*f,v=i*c,p=i*f,m=u*f,b=l*s,x=l*c,I=l*f,y=r[0],S=r[1],_=r[2],D=a[0],g=a[1],F=a[2];return t[0]=(1-(v+m))*y,t[1]=(d+I)*y,t[2]=(M-x)*y,t[3]=0,t[4]=(d-I)*S,t[5]=(1-(h+m))*S,t[6]=(p+b)*S,t[7]=0,t[8]=(M+x)*_,t[9]=(p-b)*_,t[10]=(1-(h+v))*_,t[11]=0,t[12]=n[0]+D-(t[0]*D+t[4]*g+t[8]*F),t[13]=n[1]+g-(t[1]*D+t[5]*g+t[9]*F),t[14]=n[2]+F-(t[2]*D+t[6]*g+t[10]*F),t[15]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,l=a+a,s=n*i,c=r*i,f=r*u,h=a*i,d=a*u,M=a*l,v=o*i,p=o*u,m=o*l;return t[0]=1-f-M,t[1]=c+m,t[2]=h-p,t[3]=0,t[4]=c-m,t[5]=1-s-M,t[6]=d+v,t[7]=0,t[8]=h+p,t[9]=d-v,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),l=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},a.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(a+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*l*.5,t[9]=(a-o)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},a.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),l=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*l,t[14]=(i+o)*s,t[15]=1,t},a.lookAt=function(t,e,n,o){var i,u,l,s,c,f,h,d,M,v,p=e[0],m=e[1],b=e[2],x=o[0],I=o[1],y=o[2],S=n[0],_=n[1],D=n[2];return Math.abs(p-S)<r.EPSILON&&Math.abs(m-_)<r.EPSILON&&Math.abs(b-D)<r.EPSILON?a.identity(t):(h=p-S,d=m-_,M=b-D,v=1/Math.sqrt(h*h+d*d+M*M),h*=v,d*=v,M*=v,i=I*M-y*d,u=y*h-x*M,l=x*d-I*h,v=Math.sqrt(i*i+u*u+l*l),v?(v=1/v,i*=v,u*=v,l*=v):(i=0,u=0,l=0),s=d*l-M*u,c=M*i-h*l,f=h*u-d*i,v=Math.sqrt(s*s+c*c+f*f),v?(v=1/v,s*=v,c*=v,f*=v):(s=0,c=0,f=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=u,t[5]=c,t[6]=d,t[7]=0,t[8]=l,t[9]=f,t[10]=M,t[11]=0,t[12]=-(i*p+u*m+l*b),t[13]=-(s*p+c*m+f*b),t[14]=-(h*p+d*m+M*b),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],d=t[10],M=t[11],v=t[12],p=t[13],m=t[14],b=t[15],x=e[0],I=e[1],y=e[2],S=e[3],_=e[4],D=e[5],g=e[6],F=e[7],E=e[8],w=e[9],O=e[10],R=e[11],T=e[12],A=e[13],P=e[14],j=e[15];return Math.abs(n-x)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(a-I)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(o-y)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-S)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(u-_)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-D)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-F)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-w)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(M-R)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(v-T)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(b-j)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(j))},t.exports=a},function(t,e,n){var r=n(2),a=n(14),o=n(15),i=n(16),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,i){var l=o.dot(a,i);return l<-.999999?(o.cross(t,e,a),o.length(t)<1e-6&&o.cross(t,n,a),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+l,u.normalize(r,r))}}(),u.setAxes=function(){var t=a.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},u.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},u.add=i.add,u.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*c+i*u+a*s-o*l,t[1]=a*c+i*l+o*u-r*s,t[2]=o*c+i*s+r*l-a*u,t[3]=i*c-r*u-a*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*u,t[1]=a*l+o*u,t[2]=o*l-a*u,t[3]=i*l-r*u,t},u.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*u,t[1]=a*l+i*u,t[2]=o*l+r*u,t[3]=i*l-a*u,t},u.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*u,t[1]=a*l-r*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,n,r){var a,o,i,u,l,s=e[0],c=e[1],f=e[2],h=e[3],d=n[0],M=n[1],v=n[2],p=n[3];return o=s*d+c*M+f*v+h*p,o<0&&(o=-o,d=-d,M=-M,v=-v,p=-p),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,l=Math.sin(r*a)/i):(u=1-r,l=r),t[0]=u*s+l*d,t[1]=u*c+l*M,t[2]=u*f+l*v,t[3]=u*h+l*p,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(n,r,a,o,i,l){return u.slerp(t,r,i,l),u.slerp(e,a,o,l),u.slerp(n,t,e,2*l*(1-l)),n}}(),u.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*o+i]-e[3*i+o])*n,t[o]=(e[3*o+a]+e[3*a+o])*n,t[i]=(e[3*i+a]+e[3*a+i])*n}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,n){var r=n(2),a={};a.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,n){return t[0]=e,t[1]=n,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},a.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},a.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,l;for(n||(n=2),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var n=t[0],a=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var a=(0,o.getContext)();this.boundLocation=n,this.data=new Float32Array(e),this.buffer=a.createBuffer(),a.bindBuffer(a.UNIFORM_BUFFER,this.buffer),a.bufferData(a.UNIFORM_BUFFER,this.data,a.STATIC_DRAW),a.bindBuffer(a.UNIFORM_BUFFER,null)}return a(t,[{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o.getContext)();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,this.boundLocation,this.buffer)}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Perspective=e.Orthographic=void 0;var a=n(28),o=r(a),i=n(30),u=r(i);e.Orthographic=o.default,e.Perspective=u.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),s=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(s),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:.1,far:100}),Object.assign(n.position,i({x:0,y:0,z:99},t.position)),n.target=l.vec3.create(),n.up=l.vec3.fromValues(0,1,0),n.projectionMatrix=l.mat4.create(),n}return o(e,t),u(e,[{key:"lookAt",value:function(t){l.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){l.mat4.ortho(this.projectionMatrix,-1,1,-1,1,this.near,this.far)}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.data=o.vec3.fromValues(e,n,a)}return a(t,[{key:"set",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"x",set:function(t){o.vec3.set(this.data,t,this.data[1],this.data[2])},get:function(){return this.data[0]}},{key:"y",set:function(t){o.vec3.set(this.data,this.data[0],t,this.data[2])},get:function(){return this.data[1]}},{key:"z",set:function(t){o.vec3.set(this.data,this.data[0],this.data[1],t)},get:function(){return this.data[2]}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),s=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(s),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:.1,far:1e3,fov:35}),Object.assign(n.position,i({x:0,y:100,z:500},t.position)),n.target=l.vec3.create(),n.up=l.vec3.fromValues(0,1,0),n.projectionMatrix=l.mat4.create(),n}return o(e,t),u(e,[{key:"lookAt",value:function(t){l.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){l.mat4.perspective(this.projectionMatrix,this.fov*Math.PI/180,t/e,this.near,this.far)}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(3),c=function(t){function e(){r(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.ambient=[],t.directional=[],t.point=[],t}return o(e,t),i(e,[{key:"traverse",value:function(t){void 0===t&&(t=this);for(var e=0;e<t.children.length;e+=1)this.traverse(t.children[e]);null!==t.parent&&t.updateMatrices()}},{key:"addLight",value:function(t){switch(t.type){case s.AMBIENT_LIGHT:this.ambient.push(t);break;case s.DIRECTIONAL_LIGHT:this.directional.push(t);break;case s.POINT_LIGHT:this.point.push(t)}}},{key:"removeLight",value:function(t){var e=this.ambient.indexOf(t);-1!==e&&(t.destroy(),this.ambient.splice(e,1)),e=this.directional.indexOf(t),-1!==e&&(t.destroy(),this.directional.splice(e,1)),-1!==(e=this.point.indexOf(t))&&(t.destroy(),this.point.splice(e,1))}}]),e}(l.default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Raw=e.Sem=e.FlatShading=e.Basic=void 0;var a=n(8),o=r(a),i=n(39),u=r(i),l=n(40),s=r(l),c=n(41),f=r(c);e.Basic=o.default,e.FlatShading=u.default,e.Sem=s.default,e.Raw=f.default},function(t,e,n){"use strict";function r(t){return s.vec3.fromValues(t[0]/255,t[1]/255,t[2]/255)}function a(t){var e=t>>16,n=t>>8&255,r=255&t;return s.vec3.fromValues(e,n,r)}function o(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?s.vec3.fromValues(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function i(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function u(t,e,n){return"#"+i(t)+i(e)+i(n)}function l(t){var e=s.vec3.create(),n="number"==typeof t?a(t):o(t);return s.vec3.copy(e,r(n)),e}Object.defineProperty(e,"__esModule",{value:!0}),e.hexIntToRgb=a,e.hexStringToRgb=o,e.componentToHex=i,e.rgbToHex=u,e.convert=l;var s=n(1)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),i=function(){function t(){r(this,t);var e=(0,o.getContext)();this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)}return a(t,[{key:"bind",value:function(){(0,o.getContext)().bindVertexArray(this.vao)}},{key:"unbind",value:function(){(0,o.getContext)().bindVertexArray(null)}},{key:"destroy",value:function(){(0,o.getContext)().deleteVertexArray(this.vao),this.vao=null}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(r);console.error("Error compiling shader",a),t.deleteShader(r)}return r}Object.defineProperty(e,"__esModule",{value:!0});e.createProgram=function(t,e,n){var a=r(t,e,t.VERTEX_SHADER),o=r(t,n,t.FRAGMENT_SHADER),i=t.createProgram();return t.attachShader(i,a),t.attachShader(i,o),t.linkProgram(i),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={scene:function(){return"\n        uniform perScene {\n            mat4 projectionMatrix;\n            mat4 viewMatrix;\n            vec4 fogSettings;\n            vec4 fogColor;\n            float iGlobalTime;\n        };"},model:function(){return"\n        uniform perModel {\n            mat4 modelMatrix;\n            mat4 normalMatrix;\n        };"}};e.UBO=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={before:function(){return"\n        struct Directional {\n            vec4 dlPosition;\n            vec4 dlColor;\n            float flIntensity;\n        };\n\n        uniform directional {\n            Directional directionalLights[MAX_DIRECTIONAL];\n        };\n        "},main:function(){return"\n            vec3 dcolor = vec3(0.0);\n            for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n                vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz * vec3(-1.0, -1.0, 1.0));\n\n                vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n                vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n                dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            }\n            dcolor /= float(MAX_DIRECTIONAL);\n            base.rgb *= dcolor;\n        "}},a={before:function(){return""},main:function(){return""}};e.DIRECTIONAL=r,e.POINT=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={linear:function(){return"\n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n\n        fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"},exponential:function(){return"\n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n        fogFactor = 1.0 / exp(dist * fogDensity);\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"},exponential2:function(){return"\n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n        fogFactor = 1.0 /exp( (dist * fogDensity) * (dist * fogDensity) );\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"}};e.FOG=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(9),l=n(3),s=n(10),c=r(s),f=n(7),h=r(f),d=n(5),M=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=l.FLATSHADING_MATERIAL,n.map=new h.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{color:{type:"vec3",value:u.color.convert(t&&t.color||16777215)},map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+d.UBO.scene()+"\n"+d.UBO.model()+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 fragVertexEc;\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = position;\n\n    fragVertexEc = position.xyz;\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n        ",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+l.MAX_DIRECTIONAL+"\n\nprecision highp float;\nprecision highp int;\n\n"+d.UBO.scene()+"\n"+d.UBO.model()+"\n\n"+d.DIRECTIONAL.before()+"\n\nuniform vec3 color;\nuniform sampler2D map;\n\nin vec3 fragVertexEc;\nin vec2 v_uv;\nin vec3 v_normal;\n\nout vec4 outColor;\n\nvoid main() {\n    vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n    base += vec4(color, 1.0);\n\n    "+d.DIRECTIONAL.main()+"\n    "+d.FOG.linear()+"\n\n    outColor = base;\n}\n        ",n}return i(e,t),e}(c.default);e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),l=n(10),s=r(l),c=n(7),f=r(c),h=n(5),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=u.SEM_MATERIAL,n.map=new f.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+h.UBO.scene()+"\n"+h.UBO.model()+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\n\nvoid main() {\n    vec4 position = viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = projectionMatrix * position;\n\n    vec3 v_e = vec3(position);\n    vec3 v_n = mat3(viewMatrix * modelMatrix) * a_normal;\n    vec3 r = reflect(normalize(v_e), normalize(v_n));\n    float m = 2.0 * sqrt(pow(r.x, 2.0) + pow(r.y, 2.0) + pow(r.z + 1.0, 2.0));\n    v_uv = r.xy / m + 0.5;\n}\n        ",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+u.MAX_DIRECTIONAL+"\n\nprecision highp float;\nprecision highp int;\n\n"+h.UBO.scene()+"\n"+h.UBO.model()+"\n\n"+h.DIRECTIONAL.before()+"\n\nuniform sampler2D map;\n\nin vec2 v_uv;\n\nout vec4 outColor;\n\nvoid main() {\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n\n    "+h.FOG.linear()+"\n\n    outColor = base;\n}\n        ",n}return i(e,t),e}(s.default);e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),u=n(10),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(5),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=i.RAW_MATERIAL,Object.assign(n.uniforms,t.uniforms),n.vertex=t.vertex||"#version 300 es\n"+s.UBO.scene()+"\n"+s.UBO.model()+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    vec4 position = viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = projectionMatrix * position;\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n        ",n.fragment=t.fragment||"#version 300 es\n\n#define MAX_DIRECTIONAL "+i.MAX_DIRECTIONAL+"\n\nprecision highp float;\nprecision highp int;\n\n"+s.UBO.scene()+"\n"+s.UBO.model()+"\n\n"+s.DIRECTIONAL.before()+"\n\nin vec2 v_uv;\nin vec3 v_normal;\n\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(v_normal, 1.0);\n}\n        ",n}return o(e,t),e}(l.default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=e.Plane=e.Icosahedron=e.Box=void 0;var a=n(43),o=r(a),i=n(44),u=r(i),l=n(45),s=r(l),c=n(18),f=r(c);e.Box=o.default,e.Icosahedron=u.default,e.Plane=s.default,e.Line=f.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r(this,t);for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=0;i<o.length;i+=3)o[i+0]*=e,o[i+1]*=n,o[i+2]*=a;return{positions:o,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}};e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(11),i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);for(var a=.5+Math.sqrt(5)/2,i=[-1,+a,0,1,+a,0,-1,-a,0,1,-a,0,0,-1,+a,0,1,+a,0,-1,-a,0,1,-a,+a,0,-1,+a,0,1,-a,0,-1,-a,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l=[],s={faces:(0,o.unflatten)(u,3),positions:(0,o.unflatten)(i,3)},c=Math.min(n,3);c-- >0;)s=this.subdivide(s);for(var f=0;f<s.positions.length;f++){var h=this.normalize(s.positions[f]),d=.5*(-Math.atan2(h[2],-h[0])/Math.PI+1),M=.5+Math.asin(h[1])/Math.PI;l.push([1-d,1-M])}i=s.positions;for(var v=0;v<i.length;v++)this.scale(i[v],e);var p={positions:(0,o.flatten)(s.positions),indices:(0,o.flatten)(s.faces),normals:null,uvs:(0,o.flatten)(l,2)};return p.normals=(0,o.generateVertexNormals)(p.positions,p.indices),p}return a(t,[{key:"fixPoleUVs",value:function(t,e,n){function r(e,r,a,o){var s=n[a],c=n[o];n[r][0]=(s[0]+c[0])/2,l++,i.push(t[r].slice()),u.push(n[r].slice()),e[0]=l}var a=this.firstYIndex(t,1),o=this.firstYIndex(t,-1);if(-1!==a&&-1!==o){for(var i=t.slice(),u=n.slice(),l=i.length-1,s=0;s<e.length;s++){var c=e[s],f=c[0],h=c[1],d=c[2];f===a?r(c,a,h,d):f===o&&r(c,o,h,d)}t=i,n=u}}},{key:"firstYIndex",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}},{key:"normalize",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}},{key:"scale",value:function(t,e){for(var n=0;n<t.length;n++)t[n]*=e;return t}},{key:"subdivide",value:function(t){function e(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function n(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}function r(t,r){var a=e(t,r),o=n(a),i=l[o];return i||(l[o]=a,l[o])}for(var a=t.positions,o=t.faces,i=[],u=[],l={},s=0,c=0;c<o.length;c++){var f=o[c],h=f[0],d=f[1],M=f[2],v=a[h],p=a[d],m=a[M],b=r(v,p),x=r(p,m),I=r(m,v),y=u.indexOf(b);-1===y&&(y=s++,u.push(b));var S=u.indexOf(x);-1===S&&(S=s++,u.push(x));var _=u.indexOf(I);-1===_&&(_=s++,u.push(I));var D=u.indexOf(v);-1===D&&(D=s++,u.push(v));var g=u.indexOf(p);-1===g&&(g=s++,u.push(p));var F=u.indexOf(m);-1===F&&(F=s++,u.push(m)),i.push([D,y,_]),i.push([g,S,y]),i.push([F,_,S]),i.push([y,S,_])}return{faces:i,positions:u}}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";r(this,t);for(var u=[],l=[],s=[],c=[],f=0,h=2*e,d=2*n,M=h/a,v=d/o,p=.5*-h,m=.5*-d,b=1/a,x=1/o,I=0;I<o;I+=1)for(var y=0;y<a;y+=1){var S=M*y+p,_=v*I+m,D=y/a,g=I/o;switch(i){case"XZ":u=u.concat([S,0,_]),u=u.concat([S+M,0,_]),u=u.concat([S+M,0,_+v]),u=u.concat([S,0,_+v]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),c=c.concat([D,1-g]),c=c.concat([D+b,1-g]),c=c.concat([D+b,1-(g+x)]),c=c.concat([D,1-(g+x)]);break;case"YZ":u=u.concat([0,_,S]),u=u.concat([0,_,S+M]),u=u.concat([0,_+v,S+M]),u=u.concat([0,_+v,S]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),c=c.concat([1-D,g]),c=c.concat([1-(D+b),g]),c=c.concat([1-(D+b),g+x]),c=c.concat([1-D,g+x]);break;default:u=u.concat([S,_,0]),u=u.concat([S+M,_,0]),u=u.concat([S+M,_+v,0]),u=u.concat([S,_+v,0]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),c=c.concat([D,g]),c=c.concat([D+b,g]),c=c.concat([D+b,g+x]),c=c.concat([D,g+x])}l.push(4*f+0),l.push(4*f+1),l.push(4*f+2),l.push(4*f+0),l.push(4*f+2),l.push(4*f+3),f+=1}return{positions:u,indices:l,normals:s,uvs:c}};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Directional=void 0;var r=n(47),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Directional=a.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(9),c=n(3),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=c.DIRECTIONAL_LIGHT,n.guiColor=t&&t.color||14606046,n._color=s.color.convert(n.guiColor),n.intensity=t.intensity||.5,n}return o(e,t),i(e,[{key:"destroy",value:function(){}},{key:"color",set:function(t){this._color=s.color.convert(t)},get:function(){return this._color}}]),e}(l.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Orbit=void 0;var r=n(49),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Orbit=a.default},function(t,e,n){"use strict";(function(t){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),i=n(17),u=n(0),l=.5*-Math.PI,s=function(){function e(n){var a=this;r(this,e),this.onStart=function(t){t.preventDefault(),a.oy=a.ry,a.ox=a.rx,a._startY=t.pageX/a.width,a._startX=t.pageY/a.height,a.isDown=!0},this.onMove=function(t){if(a.isDown){var e=t.pageX/a.width,n=t.pageY/a.height;a.rx=a.ox+-(a._startX-n)*a.rotationSpeed,a.ry=a.oy+(a._startY-e)*a.rotationSpeed,a.rx=(0,i.clamp)(a.rx,.5*-Math.PI,.5*Math.PI)}},this.onEnd=function(){a.isDown=!1},this.onWheel=function(t){t.preventDefault(),a.zoom(-t.deltaY)};var o=(0,u.getContext)();this.camera=n,this.domElement=o.canvas,this.radius=Math.max(n.position.x,n.position.z),this.rx=Math.atan2(n.position.y,this.radius),this.ry=Math.atan2(n.position.z,n.position.x)+l,this.ox=0,this.oy=0,this.width=t.innerWidth,this.height=t.innerHeight,this.rotationSpeed=5*t.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this.enable()}return a(e,[{key:"enable",value:function(){this.domElement.addEventListener("mousedown",this.onStart,!1),this.domElement.addEventListener("mousemove",this.onMove,!1),this.domElement.addEventListener("mouseup",this.onEnd,!1),this.domElement.addEventListener("touchstart",this.onStart,!1),this.domElement.addEventListener("touchmove",this.onMove,!1),this.domElement.addEventListener("touchend",this.onEnd,!1),t.addEventListener("wheel",this.onWheel,!1)}},{key:"disable",value:function(){this.domElement.removeEventListener("mousedown",this.onStart,!1),this.domElement.removeEventListener("mousemove",this.onMove,!1),this.domElement.removeEventListener("mouseup",this.onEnd,!1),this.domElement.removeEventListener("touchstart",this.onStart,!1),this.domElement.removeEventListener("touchmove",this.onMove,!1),this.domElement.removeEventListener("touchend",this.onEnd,!1),t.removeEventListener("wheel",this.onWheel,!1)}},{key:"zoom",value:function(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=(0,i.clamp)(this.radius,this.zoomMin,this.zoomMax)}},{key:"update",value:function(){var t=this.radius*Math.sin(this.rx),e=this.radius*Math.cos(this.rx),n=Math.sin(this.ry)*e,r=Math.cos(this.ry)*e;o.vec3.set(this.camera.position.data,n,t,r)}}]),e}();e.default=s}).call(e,n(13))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Json=e.Obj=e.File=void 0;var a=n(12),o=r(a),i=n(51),u=r(i),l=n(52),s=r(l);e.File=o.default,e.Obj=u.default,e.Json=s.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(12),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(){r(this,t)}return a(t,null,[{key:"load",value:function(e,n){i.default.load(e).then(function(e){n(t.parse(e))})}},{key:"parse",value:function(t){var e=[],n=[],r=[],a={};a.verts=[],a.norms=[],a.textures=[],a.hashindices={},a.indices=[],a.index=0;for(var o=t.split("\n"),i=/^v\s/,u=/^vn\s/,l=/^vt\s/,s=/^f\s/,c=/\s+/,f=0;f<o.length;f++){var h=o[f].trim(),d=h.split(c);if(d.shift(),i.test(h))e.push.apply(e,d);else if(u.test(h))n.push.apply(n,d);else if(l.test(h))r.push.apply(r,d);else if(s.test(h))for(var M=!1,v=0;v<d.length;v++){if(3!==v||M||(v=2,M=!0),d[v]in a.hashindices)a.indices.push(a.hashindices[d[v]]);else{var p=d[v].split("/");a.verts.push(+e[3*(p[0]-1)+0]),a.verts.push(+e[3*(p[0]-1)+1]),a.verts.push(+e[3*(p[0]-1)+2]),r.length&&(a.textures.push(+r[2*(p[1]-1)+0]),a.textures.push(+r[2*(p[1]-1)+1])),a.norms.push(+n[3*(p[2]-1)+0]),a.norms.push(+n[3*(p[2]-1)+1]),a.norms.push(+n[3*(p[2]-1)+2]),a.hashindices[d[v]]=a.index,a.indices.push(a.index),a.index+=1}3===v&&M&&a.indices.push(a.hashindices[d[0]])}}return{positions:a.verts,indices:a.indices,normals:a.norms,uvs:a.textures}}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(12),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=n(11),l=function(){function t(){r(this,t)}return a(t,null,[{key:"load",value:function(e,n){i.default.load(e).then(function(e){n(t.parse(e))})}},{key:"parse",value:function(t){var e=JSON.parse(t);return void 0===e.normals&&(e.normals=(0,u.generateVertexNormals)(e.positions,e.indices)),{positions:e.positions,indices:e.indices,normals:e.normals}}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.lights=e.Normal=e.Axis=void 0;var a=n(54),o=r(a),i=n(55),u=r(i),l=n(56),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l);e.Axis=o.default,e.Normal=u.default,e.lights=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=n(4),s=r(l),c=n(6),f=r(c),h=n(8),d=r(h),M=n(18),v=r(M),p=n(0),m=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||1,i=new v.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(r,0,0)),l=new v.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,r,0)),s=new v.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,0,r)),c=new d.default({color:16711680}),h=new d.default({color:65280}),M=new d.default({color:255}),m=new f.default(i,c);n.addModel(m);var b=new f.default(l,h);n.addModel(b);var x=new f.default(s,M);return n.addModel(x),m.material.glMode=b.material.glMode=x.material.glMode=p.GL_LINES,n}return i(e,t),e}(s.default);e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},s=n(1),c=n(6),f=r(c),h=n(8),d=r(h),M=n(0),v=function(t){function e(t){a(this,e);for(var n={positions:[],indices:[]},r=t.model.scale.x,i=t.model.scale.y,u=t.model.scale.z,l=t.model.geometry.normals.length/3,s=0;s<l;s+=1){var c=3*s,f=r*t.model.geometry.positions[c+0],h=i*t.model.geometry.positions[c+1],v=u*t.model.geometry.positions[c+2],p=t.model.geometry.normals[c+0],m=t.model.geometry.normals[c+1],b=t.model.geometry.normals[c+2],x=f+t.size*p,I=h+t.size*m,y=v+t.size*b;n.positions=n.positions.concat([f,h,v,x,I,y])}var S=new d.default({color:t&&t.color||16777215}),_=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,S));return _.reference=t.model,_.material.glMode=M.GL_LINES,_}return i(e,t),u(e,[{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),s.vec3.copy(this.position.data,this.reference.position.data),s.vec3.copy(this.rotation.data,this.reference.rotation.data),this.lookToTarget=this.reference.lookToTarget}}]),e}(f.default);e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Directional=void 0;var r=n(57),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Directional=a.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},s=n(1),c=n(6),f=r(c),h=n(8),d=r(h),M=n(0),v=function(t){function e(t){a(this,e);var n={positions:[],indices:[]};n.positions.push(-25,25,0),n.positions.push(25,25,0),n.positions.push(25,-25,0),n.positions.push(-25,-25,0),n.positions.push(0,0,0),n.positions.push(0,0,0),n.indices.push(0,1,1,2,2,3,3,0,4,5);var r=new d.default({color:16777215}),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.reference=t.light,i.material.glMode=M.GL_LINES,i.lookToTarget=!0,i}return i(e,t),u(e,[{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),s.vec3.copy(this.position.data,this.reference.position.data),s.vec3.copy(this.rotation.data,this.reference.rotation.data),s.vec3.copy(this.scale.data,this.reference.scale.data);var t=s.vec3.subtract(this.position.data,this.position.data,this.reference.target);this.geometry.positions[this.geometry.positions.length-1]=s.vec3.length(t),this.positionsNeedUpdate=!0}}]),e}(f.default);e.default=v}])});