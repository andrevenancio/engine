!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("engine",[],e):"object"==typeof exports?exports.engine=e():t.engine=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="lib",e(e.s=19)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=(e.library="lowww engine",e.version="0.0.7",void 0),o=void 0,a=void 0,i=void 0;e.setContext=function(t){r=t,o=t.TRIANGLES,a=t.LINES,i=t.POINTS},e.getContext=function(){return r},e.GL_TRIANGLES=function(){return o},e.GL_LINES=function(){return a},e.GL_POINTS=function(){return i}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var o=n(2),a=r(o),i=n(22),u=r(i),c=n(23),s=r(c),f=n(14),l=r(f),h=n(24),v=r(h),d=n(25),p=r(d),m=n(26),b=r(m),M=n(15),y=r(M),_=n(16),g=r(_);e.glMatrix=a,e.mat2=u,e.mat2d=s,e.mat3=l,e.mat4=v,e.quat=p,e.vec2=b,e.vec3=y,e.vec4=g},function(t,e,n){"use strict";function r(t){e.ARRAY_TYPE=u=t}function o(t){return t*c}function a(t,e){return Math.abs(t-e)<=i*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=o,e.equals=a;var i=e.EPSILON=1e-6,u=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,c=(e.RANDOM=Math.random,Math.PI/180)},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.DEFAULT_MATERIAL=100,e.BASIC_MATERIAL=101,e.FLATSHADING_MATERIAL=102,e.SEM_MATERIAL=103,e.RAW_MATERIAL=104,e.AMBIENT_LIGHT=200,e.DIRECTIONAL_LIGHT=201,e.POINT_LIGHT=202,e.MAX_DIRECTIONAL=2},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),i=n(30),u=function(t){return t&&t.__esModule?t:{default:t}}(i),c=0,s=0,f=a.vec3.create(),l=function(){function t(){r(this,t),this.uid=c++,this.position=new u.default,this.rotation=new u.default,this.scale=new u.default(1,1,1),this.quaternion=a.quat.create(),this.target=a.vec3.create(),this.up=a.vec3.fromValues(0,1,0),this.parent=null,this.children=[],this.parentMatrix=a.mat4.create(),this.modelMatrix=a.mat4.create(),this.lookAtMatrix=a.mat4.create(),this.lookToTarget=!1,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=1}return o(t,[{key:"addModel",value:function(){function t(t){t.parent=this,this.children.push(t)}return t}()},{key:"removeModel",value:function(){function t(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1))}return t}()},{key:"updateMatrices",value:function(){function t(){a.mat4.identity(this.parentMatrix),a.mat4.identity(this.modelMatrix),a.mat4.identity(this.lookAtMatrix),a.quat.identity(this.quaternion),this.parent&&(a.mat4.copy(this.parentMatrix,this.parent.modelMatrix),a.mat4.multiply(this.modelMatrix,this.modelMatrix,this.parentMatrix)),this.lookToTarget?(a.mat4.targetTo(this.lookAtMatrix,this.position.data,this.target,this.up),a.mat4.multiply(this.modelMatrix,this.modelMatrix,this.lookAtMatrix)):(a.mat4.translate(this.modelMatrix,this.modelMatrix,this.position.data),a.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),a.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),a.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),s=a.quat.getAxisAngle(f,this.quaternion),a.mat4.rotate(this.modelMatrix,this.modelMatrix,s,f)),a.mat4.scale(this.modelMatrix,this.modelMatrix,this.scale.data)}return t}()}]),t}();e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.UBO=e.FOG=e.DIRECTIONAL=void 0;var r=n(37),o=n(38),a=n(39);e.DIRECTIONAL=r.DIRECTIONAL,e.FOG=o.FOG,e.UBO=a.UBO},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=(0,a.getContext)();Object.assign(this,{magFilter:n.NEAREST,minFilter:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE},e);var o=new Uint8Array([0,0,0,255]);this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),n.bindTexture(n.TEXTURE_2D,null)}return o(t,[{key:"fromImage",value:function(){function t(t){var e=this,n=new Image;n.crossOrigin="",n.onload=function(){e.update(n)},n.src=t}return t}()},{key:"update",value:function(){function t(t){var e=(0,a.getContext)();e.bindTexture(e.TEXTURE_2D,this.texture),e.generateMipmap(e.TEXTURE_2D),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}return t}()}]),t}();e.default=i},function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.math=e.geometry=e.color=void 0;var o=n(11),a=r(o),i=n(17),u=r(i),c=n(34),s=r(c);e.color=s,e.geometry=a,e.math=u},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(35),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(36),c=n(0),s={},f=function(){function t(){r(this,t),this.defines={},this.attributes=Object.assign({a_position:{type:"vec3",value:null},a_normal:{type:"vec3",value:null},a_uv:{type:"vec2",value:null}}),this.uniforms={},this.vertex="",this.fragment="",this.vao=new i.default,this.program=null,this.indices=null,this.glMode=c.GL_TRIANGLES}return o(t,[{key:"createProgram",value:function(){function t(){var t=(0,c.getContext)(),e="shader-"+String(this.type);if(void 0===s[e]){var n=(0,u.createProgram)(t,this.vertex,this.fragment);s[e]=n}this.program=s[e]}return t}()},{key:"initAttributes",value:function(){function t(){var t=(0,c.getContext)();for(var e in this.attributes){var n=this.attributes[e],r=t.getAttribLocation(this.program,e),o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,n.value,t.DYNAMIC_DRAW);var a=void 0;switch(n.type){case"vec3":a=3;break;case"vec2":a=2;break;default:a=1}Object.assign(n,{location:r,buffer:o,size:a})}this.indices&&(this.indexBuffer=t.createBuffer())}return t}()},{key:"initUniforms",value:function(){function t(){var t=this,e=(0,c.getContext)(),n=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5];Object.keys(this.uniforms).forEach(function(r,o){var a=t.uniforms[r],i=e.getUniformLocation(t.program,r);"sampler2D"===a.type&&(a.textureIndex=o,a.activeTexture=n[o]),a.location=i})}return t}()},{key:"init",value:function(){function t(){this.createProgram(),this.initAttributes(),this.initUniforms(),this.vao.bind(),this.bind(),this.vao.unbind(),this.unbind()}return t}()},{key:"destroy",value:function(){function t(){}return t}()},{key:"bind",value:function(){function t(){var t=this,e=(0,c.getContext)();Object.keys(this.attributes).forEach(function(n){var r=t.attributes[n],o=r.location,a=r.buffer,i=r.size;-1!==o&&(e.enableVertexAttribArray(o),e.bindBuffer(e.ARRAY_BUFFER,a),e.vertexAttribPointer(o,i,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null))}),this.indices&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW))}return t}()},{key:"unbind",value:function(){function t(){var t=(0,c.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}return t}()},{key:"update",value:function(){function t(){var t=this,e=(0,c.getContext)();Object.keys(this.uniforms).forEach(function(n){var r=t.uniforms[n];switch(r.type){case"mat4":e.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":e.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":e.uniform4fv(r.location,r.value);break;case"vec3":e.uniform3fv(r.location,r.value);break;case"vec2":e.uniform2fv(r.location,r.value);break;case"float":e.uniform1f(r.location,r.value);break;case"sampler2D":e.uniform1i(r.location,r.textureIndex),e.activeTexture(r.activeTexture),e.bindTexture(e.TEXTURE_2D,r.value);break;default:console.warn("unknown uniform type",r.type)}})}return t}()}]),t}();e.default=f},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(0),f=function(t){function e(t,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.geometry={positions:new Float32Array(t.positions),indices:new Uint16Array(t.indices),normals:new Float32Array(t.normals||t.positions.length),uvs:new Float32Array(t.uvs||t.positions.length/1.5)},a.material=n,a.material.attributes.a_position.value=a.geometry.positions,a.material.attributes.a_normal.value=a.geometry.normals,a.material.attributes.a_uv.value=a.geometry.uvs,a.material.indices=a.geometry.indices,a.positionsNeedUpdate=!1,a}return a(e,t),i(e,[{key:"init",value:function(){function t(){this.material.init()}return t}()},{key:"bind",value:function(){function t(){this.material.bind()}return t}()},{key:"update",value:function(){function t(){if(this.material.update(),!0===this.positionsNeedUpdate){var t=(0,s.getContext)();t.enableVertexAttribArray(this.material.attributes.a_position.location),t.bindBuffer(t.ARRAY_BUFFER,this.material.attributes.a_position.buffer),t.bufferData(t.ARRAY_BUFFER,this.geometry.positions,t.DYNAMIC_DRAW)}this.draw()}return t}()},{key:"unbind",value:function(){function t(){this.material.unbind()}return t}()},{key:"draw",value:function(){function t(){var t=(0,s.getContext)();this.polygonOffset?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(this.polygonOffsetFactor,this.polygonOffsetUnits)):t.disable(t.POLYGON_OFFSET_FILL),this.geometry.indices.length>0?t.drawElements(this.material.glMode(),this.geometry.indices.length,t.UNSIGNED_SHORT,0):t.drawArrays(this.material.glMode(),0,this.geometry.positions.length/3)}return t}()},{key:"destroy",value:function(){function t(){this.material.destroy()}return t}()}]),e}(c.default);e.default=f},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),c=n(7),s=n(8),f=r(s),l=n(6),h=r(l),v=n(5),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=u.BASIC_MATERIAL,n.map=new h.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{color:{type:"vec3",value:c.color.convert(t&&t.color||16777215)},map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+String(u.MAX_DIRECTIONAL)+"\n\nprecision highp float;\nprecision highp int;\n\nin vec2 v_uv;\nin vec3 v_normal;\n\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\n"+String(v.DIRECTIONAL.before())+"\n\nuniform vec3 color;\nuniform sampler2D map;\n\n\nout vec4 outColor;\n\nvoid main() {\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n    base += vec4(color, 1.0);\n\n    outColor = base;\n}",n}return i(e,t),e}(f.default);e.default=d},function(t,e,n){function r(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(r(t[n])):e.push(t[n]);return e}function o(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var o=[],a=0;a<e;a++)o.push(t[r+a]);n.push(o)}return n}function a(t,e){for(var n=o(e,3),a=o(t,3),i=[],u=c.vec3.create(),s=c.vec3.create(),f=c.vec3.create(),l=void 0,h=void 0,v=void 0,d=0;d<n.length;d++){var p=n[d],m=p[0],b=p[1],M=p[2];l=a[m],h=a[b],v=a[M],c.vec3.subtract(u,v,h),c.vec3.subtract(s,l,h),c.vec3.cross(f,u,s),void 0===i[m]&&(i[m]=c.vec3.create()),void 0===i[b]&&(i[b]=c.vec3.create()),void 0===i[M]&&(i[M]=c.vec3.create()),c.vec3.add(i[m],i[m],f),c.vec3.add(i[b],i[b],f),c.vec3.add(i[M],i[M],f)}for(var y=0;y<i.length;y++)c.vec3.normalize(i[y],i[y]);return r(i,3)}function i(t){for(var e=o(t.positions,3),n={},i=[],u=[],c=Math.pow(10,4),s=0;s<e.length;s++){var f=e[s],l="\n            "+String(Math.round(f[0]*c))+"_\n            "+String(Math.round(f[1]*c))+"_\n            "+String(Math.round(f[2]*c))+"\n        ";void 0===n[l]?(n[l]=s,i.push(e[s]),u[s]=i.length-1):u[s]=u[n[l]]}for(var h=[],v=o(t.indices,3),d=0;d<v.length;d++){var p=v[d];p[0]=u[p[0]],p[1]=u[p[1]],p[2]=u[p[2]];for(var m=[p[0],p[1],p[2]],b=0;b<3;b++)if(m[b]===m[(b+1)%3]){h.push(d);break}}for(var M=h.length-1;M>=0;M--){var y=h[M];v.splice(y,1);for(var _=0;_<this.faceVertexUvs.length;_++)this.faceVertexUvs[_].splice(y,1)}var g=r(i,3),E=r(v,3);return{positions:new Float32Array(g),indices:new Uint16Array(E),normals:new Float32Array(a(g,E))}}function u(t){var e=o(t.positions,3);return console.log("positions",e),t}Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=r,e.unflatten=o,e.generateVertexNormals=a,e.mergeVertices=i,e.subdivide=u;var c=n(1)},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"load",value:function(){function t(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})}return t}()}]),t}();e.default=o},function(t,e){var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(){var t=new N.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new N.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,r,o,a,i,u,c){var s=new N.ARRAY_TYPE(9);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s[8]=c,s}function c(t,e,n,r,o,a,i,u,c,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function l(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=f*i-u*s,h=-f*a+u*c,v=s*a-i*c,d=n*l+r*h+o*v;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+o*s)*d,t[2]=(u*r-o*i)*d,t[3]=h*d,t[4]=(f*n-o*c)*d,t[5]=(-u*n+o*a)*d,t[6]=v*d,t[7]=(-s*n+r*c)*d,t[8]=(i*n-r*a)*d,t):null}function h(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8];return t[0]=i*f-u*s,t[1]=o*s-r*f,t[2]=r*u-o*i,t[3]=u*c-a*f,t[4]=n*f-o*c,t[5]=o*a-n*u,t[6]=a*s-i*c,t[7]=r*c-n*s,t[8]=n*i-r*a,t}function v(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],s=t[8];return e*(s*a-i*c)+n*(-s*o+i*u)+r*(c*o-a*u)}function d(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=n[0],v=n[1],d=n[2],p=n[3],m=n[4],b=n[5],M=n[6],y=n[7],_=n[8];return t[0]=h*r+v*i+d*s,t[1]=h*o+v*u+d*f,t[2]=h*a+v*c+d*l,t[3]=p*r+m*i+b*s,t[4]=p*o+m*u+b*f,t[5]=p*a+m*c+b*l,t[6]=M*r+y*i+_*s,t[7]=M*o+y*u+_*f,t[8]=M*a+y*c+_*l,t}function p(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=n[0],v=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=c,t[6]=h*r+v*i+s,t[7]=h*o+v*u+f,t[8]=h*a+v*c+l,t}function m(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=Math.sin(n),v=Math.cos(n);return t[0]=v*r+h*i,t[1]=v*o+h*u,t[2]=v*a+h*c,t[3]=v*i-h*r,t[4]=v*u-h*o,t[5]=v*c-h*a,t[6]=s,t[7]=f,t[8]=l,t}function b(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function y(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function g(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,u=r+r,c=o+o,s=n*i,f=r*i,l=r*u,h=o*i,v=o*u,d=o*c,p=a*i,m=a*u,b=a*c;return t[0]=1-l-d,t[3]=f-b,t[6]=h+m,t[1]=f+b,t[4]=1-s-d,t[7]=v-p,t[2]=h-m,t[5]=v+p,t[8]=1-s-l,t}function O(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],v=e[11],d=e[12],p=e[13],m=e[14],b=e[15],M=n*u-r*i,y=n*c-o*i,_=n*s-a*i,g=r*c-o*u,E=r*s-a*u,O=o*s-a*c,x=f*p-l*d,w=f*m-h*d,T=f*b-v*d,R=l*m-h*p,P=l*b-v*p,A=h*b-v*m,I=M*A-y*P+_*R+g*T-E*w+O*x;return I?(I=1/I,t[0]=(u*A-c*P+s*R)*I,t[1]=(c*T-i*A-s*w)*I,t[2]=(i*P-u*T+s*x)*I,t[3]=(o*P-r*A-a*R)*I,t[4]=(n*A-o*T+a*w)*I,t[5]=(r*T-n*P-a*x)*I,t[6]=(p*O-m*E+b*g)*I,t[7]=(m*_-d*O-b*y)*I,t[8]=(d*E-p*_+b*M)*I,t):null}function x(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function w(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function T(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function R(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function P(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function A(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function I(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function j(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],s=t[7],f=t[8],l=e[0],h=e[1],v=e[2],d=e[3],p=e[4],m=e[5],b=e[6],M=e[7],y=e[8];return Math.abs(n-l)<=N.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=N.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-v)<=N.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-d)<=N.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-p)<=N.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=N.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-b)<=N.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(s-M)<=N.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(f-y)<=N.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.fromMat4=o,e.clone=a,e.copy=i,e.fromValues=u,e.set=c,e.identity=s,e.transpose=f,e.invert=l,e.adjoint=h,e.determinant=v,e.multiply=d,e.translate=p,e.rotate=m,e.scale=b,e.fromTranslation=M,e.fromRotation=y,e.fromScaling=_,e.fromMat2d=g,e.fromQuat=E,e.normalFromMat4=O,e.projection=x,e.str=w,e.frob=T,e.add=R,e.subtract=P,e.multiplyScalar=A,e.multiplyScalarAndAdd=I,e.exactEquals=S,e.equals=j;var L=n(2),N=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(L);e.mul=d,e.sub=P},function(t,e,n){"use strict";function r(){var t=new X.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){var e=new X.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function i(t,e,n){var r=new X.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function v(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function p(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function M(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function g(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function E(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function O(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function x(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function w(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function R(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],u=n[1],c=n[2];return t[0]=o*c-a*u,t[1]=a*i-r*c,t[2]=r*u-o*i,t}function P(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t}function A(t,e,n,r,o,a){var i=a*a,u=i*(2*a-3)+1,c=i*(a-2)+a,s=i*(a-1),f=i*(3-2*a);return t[0]=e[0]*u+n[0]*c+r[0]*s+o[0]*f,t[1]=e[1]*u+n[1]*c+r[1]*s+o[1]*f,t[2]=e[2]*u+n[2]*c+r[2]*s+o[2]*f,t}function I(t,e,n,r,o,a){var i=1-a,u=i*i,c=a*a,s=u*i,f=3*a*u,l=3*c*i,h=c*a;return t[0]=e[0]*s+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*s+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*s+n[2]*f+r[2]*l+o[2]*h,t}function S(t,e){e=e||1;var n=2*X.RANDOM()*Math.PI,r=2*X.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function j(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t}function L(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t}function N(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],u=n[1],c=n[2],s=n[3],f=s*r+u*a-c*o,l=s*o+c*r-i*a,h=s*a+i*o-u*r,v=-i*r-u*o-c*a;return t[0]=f*s+v*-i+l*-c-h*-u,t[1]=l*s+v*-u+h*-i-f*-c,t[2]=h*s+v*-c+f*-u-l*-i,t}function D(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function F(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function C(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function U(t,e){var n=i(t[0],t[1],t[2]),r=i(e[0],e[1],e[2]);w(n,n),w(r,r);var o=T(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)}function k(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],u=e[2];return Math.abs(n-a)<=X.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=X.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-u)<=X.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=o,e.length=a,e.fromValues=i,e.copy=u,e.set=c,e.add=s,e.subtract=f,e.multiply=l,e.divide=h,e.ceil=v,e.floor=d,e.min=p,e.max=m,e.round=b,e.scale=M,e.scaleAndAdd=y,e.distance=_,e.squaredDistance=g,e.squaredLength=E,e.negate=O,e.inverse=x,e.normalize=w,e.dot=T,e.cross=R,e.lerp=P,e.hermite=A,e.bezier=I,e.random=S,e.transformMat4=j,e.transformMat3=L,e.transformQuat=N,e.rotateX=D,e.rotateY=F,e.rotateZ=C,e.angle=U,e.str=k,e.exactEquals=B,e.equals=q;var Y=n(2),X=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(Y);e.sub=f,e.mul=l,e.div=h,e.dist=_,e.sqrDist=g,e.len=a,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,r,o,a,i){var u=void 0,c=void 0;for(n||(n=3),r||(r=0),c=o?Math.min(o*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],a(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(){var t=new D.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t){var e=new D.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,n,r){var o=new D.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+a*a)}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function g(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}function E(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function O(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function x(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function w(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i),t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function R(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t}function P(t,e){return e=e||1,t[0]=D.RANDOM(),t[1]=D.RANDOM(),t[2]=D.RANDOM(),t[3]=D.RANDOM(),w(t,t),b(t,t,e),t}function A(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t}function I(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],u=n[1],c=n[2],s=n[3],f=s*r+u*a-c*o,l=s*o+c*r-i*a,h=s*a+i*o-u*r,v=-i*r-u*o-c*a;return t[0]=f*s+v*-i+l*-c-h*-u,t[1]=l*s+v*-u+h*-i-f*-c,t[2]=h*s+v*-c+f*-u-l*-i,t[3]=e[3],t}function S(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function L(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],u=e[1],c=e[2],s=e[3];return Math.abs(n-i)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=D.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-s)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=o,e.fromValues=a,e.copy=i,e.set=u,e.add=c,e.subtract=s,e.multiply=f,e.divide=l,e.ceil=h,e.floor=v,e.min=d,e.max=p,e.round=m,e.scale=b,e.scaleAndAdd=M,e.distance=y,e.squaredDistance=_,e.length=g,e.squaredLength=E,e.negate=O,e.inverse=x,e.normalize=w,e.dot=T,e.lerp=R,e.random=P,e.transformMat4=A,e.transformQuat=I,e.str=S,e.exactEquals=j,e.equals=L;var N=n(2),D=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(N);e.sub=s,e.mul=f,e.div=l,e.dist=y,e.sqrDist=_,e.len=g,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,r,o,a,i){var u=void 0,c=void 0;for(n||(n=4),r||(r=0),c=o?Math.min(o*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],a(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},function(t,e){function n(t,e,n){return Math.max(Math.min(t,n),e)}function r(t){return 0==(t&t-1)}function o(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=n,e.isPowerOf2=r,e.randomRange=o},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,r){n(this,t);var o=[];return o.push(e[0]||0,e[1]||0,e[2]||0),o.push(r[0]||0,r[1]||0,r[2]||0),{positions:o,indices:[]}}return t}();e.default=r},function(t,e,n){t.exports=n(20)},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.chunks=e.loaders=e.helpers=e.utils=e.controls=e.lights=e.geometry=e.material=e.Texture=e.Model=e.Scene=e.cameras=e.Renderer=e.constants=e.session=void 0;var a=n(0),i=o(a),u=n(21),c=r(u),s=n(28),f=o(s),l=n(32),h=r(l),v=n(9),d=r(v),p=n(6),m=r(p),b=n(33),M=o(b),y=n(44),_=o(y),g=n(48),E=o(g),O=n(50),x=o(O),w=n(7),T=o(w),R=n(52),P=o(R),A=n(55),I=o(A),S=n(3),j=o(S),L=n(5),N=o(L);e.session=i,e.constants=j,e.Renderer=c.default,e.cameras=f,e.Scene=h.default,e.Model=d.default,e.Texture=m.default,e.material=M,e.geometry=_,e.lights=E,e.controls=x,e.utils=T,e.helpers=I,e.loaders=P,e.chunks=N},function(t,e,n){(function(t){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=n(0),c=n(27),s=function(t){return t&&t.__esModule?t:{default:t}}(c),f=n(3),l=!1,h=void 0,v=void 0,d=i.mat4.create(),p=i.mat4.create(),m=i.mat4.create(),b=i.mat4.create(),M=Date.now(),y=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.ratio=t.devicePixelRatio,this.fog={start:500,end:1e3,color:i.vec4.fromValues(0,0,0,1),density:.002};var a=n.canvas||this.createCanvas(),c=a.getContext("webgl2",{antialias:!1});if(c){if(!1!==n.greeting){var h,v="color:#f33;font-size:x-small",d=["%c"+String(u.library)+"\n%cversion: %c"+String(u.version)+" %crunning: %c"+String(c.getParameter(c.VERSION)),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",v,"color:#777;font-size:x-small",v];(h=console).log.apply(h,d)}(0,u.setContext)(c),this.perScene=new s.default([].concat(r(i.mat4.create()),r(i.mat4.create()),r(i.vec4.create()),r(i.vec4.create()),r(i.vec4.create())),0),this.perModel=new s.default([].concat(r(i.mat4.create()),r(i.mat4.create())),1),this.directional=new s.default(new Float32Array(12*f.MAX_DIRECTIONAL),2),this.frameBuffer=c.createFramebuffer(),c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer),this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_NEAREST),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,256,256,0,c.RGBA,c.UNSIGNED_BYTE,null),this.renderBuffer=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,256,256),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,this.renderBuffer),c.bindTexture(c.TEXTURE_2D,null),c.bindRenderbuffer(c.RENDERBUFFER,null),c.bindFramebuffer(c.FRAMEBUFFER,null),l=!0}else alert("webgl2 not supported")}return a(e,[{key:"createCanvas",value:function(){function e(){var e=document.createElement("canvas");return e.style.display="block",e.style.boxSizing="border-box",e.style.width=t.innerWidth*t.devicePixelRatio,e.style.height=t.innerHeight*t.devicePixelRatio,document.body.appendChild(e),e}return e}()},{key:"setSize",value:function(){function t(t,e){var n=t*this.ratio,r=e*this.ratio,o=(0,u.getContext)();o.canvas.width=n,o.canvas.height=r,o.canvas.style.width=n/this.ratio+"px",o.canvas.style.height=r/this.ratio+"px"}return t}()},{key:"setRatio",value:function(){function t(t){this.ratio=t}return t}()},{key:"renderObject",value:function(){function t(t){void 0===t&&(t=this);for(var e=0;e<t.children.length;e++)this.renderObject(t.children[e]);if(null!==t.parent){var n=(0,u.getContext)();if(h=t,h.material){if(!h.material.program)return void h.init();if(v!==h.material.program){v=h.material.program,n.useProgram(v);var o=n.getUniformBlockIndex(v,"perScene"),a=n.getUniformBlockIndex(v,"perModel"),c=n.getUniformBlockIndex(v,"directional");n.uniformBlockBinding(v,o,this.perScene.boundLocation),n.uniformBlockBinding(v,a,this.perModel.boundLocation),n.uniformBlockBinding(v,c,this.directional.boundLocation)}i.mat4.identity(m),i.mat4.copy(m,h.modelMatrix),i.mat4.invert(b,m),i.mat4.transpose(b,b),i.mat4.identity(p),i.mat4.copy(p,b),h.bind(),this.perModel.update([].concat(r(h.modelMatrix),r(p))),h.update(),h.unbind(),h=null}}}return t}()},{key:"draw",value:function(){function t(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(l){var o=(0,u.getContext)();o.viewport(0,0,o.canvas.width,o.canvas.height),n&&(o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),o.enable(o.CULL_FACE),o.enable(o.DEPTH_TEST),e.updateCameraMatrix(o.canvas.width,o.canvas.height),i.mat4.identity(d),i.mat4.lookAt(d,e.position.data,e.target,e.up),t.traverse(),this.perScene.bind(),this.perModel.bind(),this.directional.bind(),this.perScene.update([].concat(r(e.projectionMatrix),r(d),[this.fog.start,this.fog.end,this.fog.density,0],r(this.fog.color),[(Date.now()-M)/1e3,0,0,0]));for(var a=0;a<t.directional.length;a++)this.directional.update([].concat(r(t.directional[a].position.data),[0]).concat([].concat(r(t.directional[a].color),[0]),[t.directional[a].intensity,0,0,0]),12*a);this.renderObject(t)}}return t}()},{key:"render",value:function(){function t(t,e){this.draw(t,e)}return t}()},{key:"rtt",value:function(){function t(t,e,n,r){var o=(0,u.getContext)();if(n!==this.rttwidth||r!==this.rttheight){var a=n*this.ratio,i=r*this.ratio;o.bindTexture(o.TEXTURE_2D,this.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,a,i,0,o.RGBA,o.UNSIGNED_BYTE,null),o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,this.renderBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,n*this.ratio,r*this.ratio),o.bindRenderbuffer(o.RENDERBUFFER,null),this.rttwidth=n,this.rttheight=r}return o.bindFramebuffer(o.FRAMEBUFFER,this.frameBuffer),this.draw(t,e),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.texture),o.generateMipmap(o.TEXTURE_2D),o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindFramebuffer(o.FRAMEBUFFER,null),this.texture}return t}()}]),e}();e.default=y}).call(e,n(13))},function(t,e,n){"use strict";function r(){var t=new P.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t){var e=new P.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n,r){var o=new P.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function c(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function s(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function f(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;return i?(i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t):null}function l(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function h(t){return t[0]*t[3]-t[2]*t[1]}function v(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=r*u+a*c,t[1]=o*u+i*c,t[2]=r*s+a*f,t[3]=o*s+i*f,t}function d(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=o*c+i*u,t[2]=r*-u+a*c,t[3]=o*-u+i*c,t}function p(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],c=n[1];return t[0]=r*u,t[1]=o*u,t[2]=a*c,t[3]=i*c,t}function m(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function _(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function g(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function O(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function x(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],u=e[1],c=e[2],s=e[3];return Math.abs(n-i)<=P.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=P.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=P.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-s)<=P.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}function w(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function T(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=a,e.identity=i,e.fromValues=u,e.set=c,e.transpose=s,e.invert=f,e.adjoint=l,e.determinant=h,e.multiply=v,e.rotate=d,e.scale=p,e.fromRotation=m,e.fromScaling=b,e.str=M,e.frob=y,e.LDU=_,e.add=g,e.subtract=E,e.exactEquals=O,e.equals=x,e.multiplyScalar=w,e.multiplyScalarAndAdd=T;var R=n(2),P=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(R);e.mul=v,e.sub=E},function(t,e,n){"use strict";function r(){var t=new R.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t){var e=new R.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u(t,e,n,r,o,a){var i=new R.ARRAY_TYPE(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i}function c(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t}function s(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=n*a-r*o;return c?(c=1/c,t[0]=a*c,t[1]=-r*c,t[2]=-o*c,t[3]=n*c,t[4]=(o*u-a*i)*c,t[5]=(r*i-n*u)*c,t):null}function f(t){return t[0]*t[3]-t[1]*t[2]}function l(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=n[0],f=n[1],l=n[2],h=n[3],v=n[4],d=n[5];return t[0]=r*s+a*f,t[1]=o*s+i*f,t[2]=r*l+a*h,t[3]=o*l+i*h,t[4]=r*v+a*d+u,t[5]=o*v+i*d+c,t}function h(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=Math.sin(n),f=Math.cos(n);return t[0]=r*f+a*s,t[1]=o*f+i*s,t[2]=r*-s+a*f,t[3]=o*-s+i*f,t[4]=u,t[5]=c,t}function v(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=n[0],f=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*f,t[3]=i*f,t[4]=u,t[5]=c,t}function d(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=n[0],f=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*s+a*f+u,t[5]=o*s+i*f+c,t}function p(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function m(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function M(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function _(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function g(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function O(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function x(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function w(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=e[0],s=e[1],f=e[2],l=e[3],h=e[4],v=e[5];return Math.abs(n-c)<=R.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-s)<=R.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-f)<=R.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-l)<=R.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=R.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-v)<=R.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=a,e.identity=i,e.fromValues=u,e.set=c,e.invert=s,e.determinant=f,e.multiply=l,e.rotate=h,e.scale=v,e.translate=d,e.fromRotation=p,e.fromScaling=m,e.fromTranslation=b,e.str=M,e.frob=y,e.add=_,e.subtract=g,e.multiplyScalar=E,e.multiplyScalarAndAdd=O,e.exactEquals=x,e.equals=w;var T=n(2),R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(T);e.mul=l,e.sub=g},function(t,e,n){"use strict";function r(){var t=new W.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=new W.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function i(t,e,n,r,o,a,i,u,c,s,f,l,h,v,d,p){var m=new W.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=a,m[6]=i,m[7]=u,m[8]=c,m[9]=s,m[10]=f,m[11]=l,m[12]=h,m[13]=v,m[14]=d,m[15]=p,m}function u(t,e,n,r,o,a,i,u,c,s,f,l,h,v,d,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=v,t[13]=d,t[14]=p,t[15]=m,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],v=e[11],d=e[12],p=e[13],m=e[14],b=e[15],M=n*u-r*i,y=n*c-o*i,_=n*s-a*i,g=r*c-o*u,E=r*s-a*u,O=o*s-a*c,x=f*p-l*d,w=f*m-h*d,T=f*b-v*d,R=l*m-h*p,P=l*b-v*p,A=h*b-v*m,I=M*A-y*P+_*R+g*T-E*w+O*x;return I?(I=1/I,t[0]=(u*A-c*P+s*R)*I,t[1]=(o*P-r*A-a*R)*I,t[2]=(p*O-m*E+b*g)*I,t[3]=(h*E-l*O-v*g)*I,t[4]=(c*T-i*A-s*w)*I,t[5]=(n*A-o*T+a*w)*I,t[6]=(m*_-d*O-b*y)*I,t[7]=(f*O-h*_+v*y)*I,t[8]=(i*P-u*T+s*x)*I,t[9]=(r*T-n*P-a*x)*I,t[10]=(d*E-p*_+b*M)*I,t[11]=(l*_-f*E-v*M)*I,t[12]=(u*w-i*R-c*x)*I,t[13]=(n*R-r*w+o*x)*I,t[14]=(p*y-d*g-m*M)*I,t[15]=(f*g-l*y+h*M)*I,t):null}function l(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],v=e[11],d=e[12],p=e[13],m=e[14],b=e[15];return t[0]=u*(h*b-v*m)-l*(c*b-s*m)+p*(c*v-s*h),t[1]=-(r*(h*b-v*m)-l*(o*b-a*m)+p*(o*v-a*h)),t[2]=r*(c*b-s*m)-u*(o*b-a*m)+p*(o*s-a*c),t[3]=-(r*(c*v-s*h)-u*(o*v-a*h)+l*(o*s-a*c)),t[4]=-(i*(h*b-v*m)-f*(c*b-s*m)+d*(c*v-s*h)),t[5]=n*(h*b-v*m)-f*(o*b-a*m)+d*(o*v-a*h),t[6]=-(n*(c*b-s*m)-i*(o*b-a*m)+d*(o*s-a*c)),t[7]=n*(c*v-s*h)-i*(o*v-a*h)+f*(o*s-a*c),t[8]=i*(l*b-v*p)-f*(u*b-s*p)+d*(u*v-s*l),t[9]=-(n*(l*b-v*p)-f*(r*b-a*p)+d*(r*v-a*l)),t[10]=n*(u*b-s*p)-i*(r*b-a*p)+d*(r*s-a*u),t[11]=-(n*(u*v-s*l)-i*(r*v-a*l)+f*(r*s-a*u)),t[12]=-(i*(l*m-h*p)-f*(u*m-c*p)+d*(u*h-c*l)),t[13]=n*(l*m-h*p)-f*(r*m-o*p)+d*(r*h-o*l),t[14]=-(n*(u*m-c*p)-i*(r*m-o*p)+d*(r*c-o*u)),t[15]=n*(u*h-c*l)-i*(r*h-o*l)+f*(r*c-o*u),t}function h(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],h=t[11],v=t[12],d=t[13],p=t[14],m=t[15];return(e*i-n*a)*(l*m-h*p)-(e*u-r*a)*(f*m-h*d)+(e*c-o*a)*(f*p-l*d)+(n*u-r*i)*(s*m-h*v)-(n*c-o*i)*(s*p-l*v)+(r*c-o*u)*(s*d-f*v)}function v(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=e[9],v=e[10],d=e[11],p=e[12],m=e[13],b=e[14],M=e[15],y=n[0],_=n[1],g=n[2],E=n[3];return t[0]=y*r+_*u+g*l+E*p,t[1]=y*o+_*c+g*h+E*m,t[2]=y*a+_*s+g*v+E*b,t[3]=y*i+_*f+g*d+E*M,y=n[4],_=n[5],g=n[6],E=n[7],t[4]=y*r+_*u+g*l+E*p,t[5]=y*o+_*c+g*h+E*m,t[6]=y*a+_*s+g*v+E*b,t[7]=y*i+_*f+g*d+E*M,y=n[8],_=n[9],g=n[10],E=n[11],t[8]=y*r+_*u+g*l+E*p,t[9]=y*o+_*c+g*h+E*m,t[10]=y*a+_*s+g*v+E*b,t[11]=y*i+_*f+g*d+E*M,y=n[12],_=n[13],g=n[14],E=n[15],t[12]=y*r+_*u+g*l+E*p,t[13]=y*o+_*c+g*h+E*m,t[14]=y*a+_*s+g*v+E*b,t[15]=y*i+_*f+g*d+E*M,t}function d(t,e,n){var r=n[0],o=n[1],a=n[2],i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,v=void 0,d=void 0,p=void 0,m=void 0,b=void 0;return e===t?(t[12]=e[0]*r+e[4]*o+e[8]*a+e[12],t[13]=e[1]*r+e[5]*o+e[9]*a+e[13],t[14]=e[2]*r+e[6]*o+e[10]*a+e[14],t[15]=e[3]*r+e[7]*o+e[11]*a+e[15]):(i=e[0],u=e[1],c=e[2],s=e[3],f=e[4],l=e[5],h=e[6],v=e[7],d=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=u,t[2]=c,t[3]=s,t[4]=f,t[5]=l,t[6]=h,t[7]=v,t[8]=d,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+f*o+d*a+e[12],t[13]=u*r+l*o+p*a+e[13],t[14]=c*r+h*o+m*a+e[14],t[15]=s*r+v*o+b*a+e[15]),t}function p(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,n,r){var o=r[0],a=r[1],i=r[2],u=Math.sqrt(o*o+a*a+i*i),c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,v=void 0,d=void 0,p=void 0,m=void 0,b=void 0,M=void 0,y=void 0,_=void 0,g=void 0,E=void 0,O=void 0,x=void 0,w=void 0,T=void 0,R=void 0,P=void 0,A=void 0,I=void 0,S=void 0;return Math.abs(u)<W.EPSILON?null:(u=1/u,o*=u,a*=u,i*=u,c=Math.sin(n),s=Math.cos(n),f=1-s,l=e[0],h=e[1],v=e[2],d=e[3],p=e[4],m=e[5],b=e[6],M=e[7],y=e[8],_=e[9],g=e[10],E=e[11],O=o*o*f+s,x=a*o*f+i*c,w=i*o*f-a*c,T=o*a*f-i*c,R=a*a*f+s,P=i*a*f+o*c,A=o*i*f+a*c,I=a*i*f-o*c,S=i*i*f+s,t[0]=l*O+p*x+y*w,t[1]=h*O+m*x+_*w,t[2]=v*O+b*x+g*w,t[3]=d*O+M*x+E*w,t[4]=l*T+p*R+y*P,t[5]=h*T+m*R+_*P,t[6]=v*T+b*R+g*P,t[7]=d*T+M*R+E*P,t[8]=l*A+p*I+y*S,t[9]=h*A+m*I+_*S,t[10]=v*A+b*I+g*S,t[11]=d*A+M*I+E*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function b(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],u=e[6],c=e[7],s=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+s*r,t[5]=i*o+f*r,t[6]=u*o+l*r,t[7]=c*o+h*r,t[8]=s*o-a*r,t[9]=f*o-i*r,t[10]=l*o-u*r,t[11]=h*o-c*r,t}function M(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],u=e[2],c=e[3],s=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-s*r,t[1]=i*o-f*r,t[2]=u*o-l*r,t[3]=c*o-h*r,t[8]=a*r+s*o,t[9]=i*r+f*o,t[10]=u*r+l*o,t[11]=c*r+h*o,t}function y(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],u=e[2],c=e[3],s=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+s*r,t[1]=i*o+f*r,t[2]=u*o+l*r,t[3]=c*o+h*r,t[4]=s*o-a*r,t[5]=f*o-i*r,t[6]=l*o-u*r,t[7]=h*o-c*r,t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var r=n[0],o=n[1],a=n[2],i=Math.sqrt(r*r+o*o+a*a),u=void 0,c=void 0,s=void 0;return Math.abs(i)<W.EPSILON?null:(i=1/i,r*=i,o*=i,a*=i,u=Math.sin(e),c=Math.cos(e),s=1-c,t[0]=r*r*s+c,t[1]=o*r*s+a*u,t[2]=a*r*s-o*u,t[3]=0,t[4]=r*o*s-a*u,t[5]=o*o*s+c,t[6]=a*o*s+r*u,t[7]=0,t[8]=r*a*s+o*u,t[9]=o*a*s-r*u,t[10]=a*a*s+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function O(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=r+r,c=o+o,s=a+a,f=r*u,l=r*c,h=r*s,v=o*c,d=o*s,p=a*s,m=i*u,b=i*c,M=i*s;return t[0]=1-(v+p),t[1]=l+M,t[2]=h-b,t[3]=0,t[4]=l-M,t[5]=1-(f+p),t[6]=d+m,t[7]=0,t[8]=h+b,t[9]=d-m,t[10]=1-(f+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function R(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function P(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],u=e[6],c=e[8],s=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(a*a+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t}function A(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function I(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=e[3],c=o+o,s=a+a,f=i+i,l=o*c,h=o*s,v=o*f,d=a*s,p=a*f,m=i*f,b=u*c,M=u*s,y=u*f,_=r[0],g=r[1],E=r[2];return t[0]=(1-(d+m))*_,t[1]=(h+y)*_,t[2]=(v-M)*_,t[3]=0,t[4]=(h-y)*g,t[5]=(1-(l+m))*g,t[6]=(p+b)*g,t[7]=0,t[8]=(v+M)*E,t[9]=(p-b)*E,t[10]=(1-(l+d))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function S(t,e,n,r,o){var a=e[0],i=e[1],u=e[2],c=e[3],s=a+a,f=i+i,l=u+u,h=a*s,v=a*f,d=a*l,p=i*f,m=i*l,b=u*l,M=c*s,y=c*f,_=c*l,g=r[0],E=r[1],O=r[2],x=o[0],w=o[1],T=o[2];return t[0]=(1-(p+b))*g,t[1]=(v+_)*g,t[2]=(d-y)*g,t[3]=0,t[4]=(v-_)*E,t[5]=(1-(h+b))*E,t[6]=(m+M)*E,t[7]=0,t[8]=(d+y)*O,t[9]=(m-M)*O,t[10]=(1-(h+p))*O,t[11]=0,t[12]=n[0]+x-(t[0]*x+t[4]*w+t[8]*T),t[13]=n[1]+w-(t[1]*x+t[5]*w+t[9]*T),t[14]=n[2]+T-(t[2]*x+t[6]*w+t[10]*T),t[15]=1,t}function j(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,u=r+r,c=o+o,s=n*i,f=r*i,l=r*u,h=o*i,v=o*u,d=o*c,p=a*i,m=a*u,b=a*c;return t[0]=1-l-d,t[1]=f+b,t[2]=h-m,t[3]=0,t[4]=f-b,t[5]=1-s-d,t[6]=v+p,t[7]=0,t[8]=h+m,t[9]=v-p,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,n,r,o,a,i){var u=1/(n-e),c=1/(o-r),s=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*c,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*c,t[10]=(i+a)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*s,t[15]=0,t}function N(t,e,n,r,o){var a=1/Math.tan(e/2),i=1/(r-o);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*i,t[15]=0,t}function D(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(o+a);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(o-a)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function F(t,e,n,r,o,a,i){var u=1/(e-n),c=1/(r-o),s=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*c,t[14]=(i+a)*s,t[15]=1,t}function C(t,e,n,r){var o=void 0,a=void 0,i=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,v=void 0,d=e[0],p=e[1],m=e[2],b=r[0],M=r[1],y=r[2],_=n[0],g=n[1],E=n[2];return Math.abs(d-_)<W.EPSILON&&Math.abs(p-g)<W.EPSILON&&Math.abs(m-E)<W.EPSILON?mat4.identity(t):(f=d-_,l=p-g,h=m-E,v=1/Math.sqrt(f*f+l*l+h*h),f*=v,l*=v,h*=v,o=M*h-y*l,a=y*f-b*h,i=b*l-M*f,v=Math.sqrt(o*o+a*a+i*i),v?(v=1/v,o*=v,a*=v,i*=v):(o=0,a=0,i=0),u=l*i-h*a,c=h*o-f*i,s=f*a-l*o,v=Math.sqrt(u*u+c*c+s*s),v?(v=1/v,u*=v,c*=v,s*=v):(u=0,c=0,s=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=l,t[7]=0,t[8]=i,t[9]=s,t[10]=h,t[11]=0,t[12]=-(o*d+a*p+i*m),t[13]=-(u*d+c*p+s*m),t[14]=-(f*d+l*p+h*m),t[15]=1,t)}function U(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=r[0],c=r[1],s=r[2],f=o-n[0],l=a-n[1],h=i-n[2],v=f*f+l*l+h*h;v>0&&(v=1/Math.sqrt(v),f*=v,l*=v,h*=v);var d=c*h-s*l,p=s*f-u*h,m=u*l-c*f;return t[0]=d,t[1]=p,t[2]=m,t[3]=0,t[4]=l*m-h*p,t[5]=h*d-f*m,t[6]=f*p-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function k(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function B(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Y(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function X(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function V(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],s=t[7],f=t[8],l=t[9],h=t[10],v=t[11],d=t[12],p=t[13],m=t[14],b=t[15],M=e[0],y=e[1],_=e[2],g=e[3],E=e[4],O=e[5],x=e[6],w=e[7],T=e[8],R=e[9],P=e[10],A=e[11],I=e[12],S=e[13],j=e[14],L=e[15];return Math.abs(n-M)<=W.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-y)<=W.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-_)<=W.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-g)<=W.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(i-E)<=W.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(u-O)<=W.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-x)<=W.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(s-w)<=W.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(f-T)<=W.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(l-R)<=W.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(h-P)<=W.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(v-A)<=W.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(d-I)<=W.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(p-S)<=W.EPSILON*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-j)<=W.EPSILON*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(b-L)<=W.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=a,e.fromValues=i,e.set=u,e.identity=c,e.transpose=s,e.invert=f,e.adjoint=l,e.determinant=h,e.multiply=v,e.translate=d,e.scale=p,e.rotate=m,e.rotateX=b,e.rotateY=M,e.rotateZ=y,e.fromTranslation=_,e.fromScaling=g,e.fromRotation=E,e.fromXRotation=O,e.fromYRotation=x,e.fromZRotation=w,e.fromRotationTranslation=T,e.getTranslation=R,e.getScaling=P,e.getRotation=A,e.fromRotationTranslationScale=I,e.fromRotationTranslationScaleOrigin=S,e.fromQuat=j,e.frustum=L,e.perspective=N,e.perspectiveFromFieldOfView=D,e.ortho=F,e.lookAt=C,e.targetTo=U,e.str=k,e.frob=B,e.add=q,e.subtract=Y,e.multiplyScalar=X,e.multiplyScalarAndAdd=z,e.exactEquals=G,e.equals=V;var H=n(2),W=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(H);e.mul=v,e.sub=Y},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(){var t=new _.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function u(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function c(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=r*f+i*u+o*s-a*c,t[1]=o*f+i*c+a*u-r*s,t[2]=a*f+i*s+r*c-o*u,t[3]=i*f-r*u-o*c-a*s,t}function s(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*u,t[1]=o*c+a*u,t[2]=a*c-o*u,t[3]=i*c-r*u,t}function f(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c-a*u,t[1]=o*c+i*u,t[2]=a*c+r*u,t[3]=i*c-o*u,t}function l(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=a*c+i*u,t[3]=i*c-a*u,t}function h(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function v(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=e[3],c=n[0],s=n[1],f=n[2],l=n[3],h=void 0,v=void 0,d=void 0,p=void 0,m=void 0;return v=o*c+a*s+i*f+u*l,v<0&&(v=-v,c=-c,s=-s,f=-f,l=-l),1-v>1e-6?(h=Math.acos(v),d=Math.sin(h),p=Math.sin((1-r)*h)/d,m=Math.sin(r*h)/d):(p=1-r,m=r),t[0]=p*o+m*c,t[1]=p*a+m*s,t[2]=p*i+m*f,t[3]=p*u+m*l,t}function d(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=a*u,t}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*a+i]-e[3*i+a])*r,t[a]=(e[3*a+o]+e[3*o+a])*r,t[i]=(e[3*i+o]+e[3*o+i])*r}return t}function b(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),u=Math.sin(n),c=Math.cos(n),s=Math.sin(r),f=Math.cos(r);return t[0]=a*c*f-i*u*s,t[1]=i*u*f+a*c*s,t[2]=i*c*s-a*u*f,t[3]=i*c*f+a*u*s,t}function M(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=o,e.identity=a,e.setAxisAngle=i,e.getAxisAngle=u,e.multiply=c,e.rotateX=s,e.rotateY=f,e.rotateZ=l,e.calculateW=h,e.slerp=v,e.invert=d,e.conjugate=p,e.fromMat3=m,e.fromEuler=b,e.str=M;var y=n(2),_=r(y),g=n(14),E=r(g),O=n(15),x=r(O),w=n(16),T=r(w),R=(e.clone=T.clone,e.fromValues=T.fromValues,e.copy=T.copy,e.set=T.set,e.add=T.add,e.mul=c,e.scale=T.scale,e.dot=T.dot,e.lerp=T.lerp,e.length=T.length),P=(e.len=R,e.squaredLength=T.squaredLength),A=(e.sqrLen=P,e.normalize=T.normalize);e.exactEquals=T.exactEquals,e.equals=T.equals,e.rotationTo=function(){var t=x.create(),e=x.fromValues(1,0,0),n=x.fromValues(0,1,0);return function(r,o,a){var u=x.dot(o,a);return u<-.999999?(x.cross(t,e,o),x.len(t)<1e-6&&x.cross(t,n,o),x.normalize(t,t),i(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(x.cross(t,o,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,A(r,r))}}(),e.sqlerp=function(){var t=o(),e=o();return function(n,r,o,a,i,u){return v(t,r,i,u),v(e,o,a,u),v(n,t,e,2*u*(1-u)),n}}(),e.setAxes=function(){var t=E.create();return function(e,n,r,o){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],A(e,m(e,t))}}()},function(t,e,n){"use strict";function r(){var t=new U.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t){var e=new U.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new U.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function i(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function g(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function O(t,e){return t[0]=-e[0],t[1]=-e[1],t}function x(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function w(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t}function T(t,e){return t[0]*e[0]+t[1]*e[1]}function R(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function P(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t}function A(t,e){e=e||1;var n=2*U.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function I(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}function S(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function j(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}function L(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}function N(t){return"vec2("+t[0]+", "+t[1]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var n=t[0],r=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=o,e.fromValues=a,e.copy=i,e.set=u,e.add=c,e.subtract=s,e.multiply=f,e.divide=l,e.ceil=h,e.floor=v,e.min=d,e.max=p,e.round=m,e.scale=b,e.scaleAndAdd=M,e.distance=y,e.squaredDistance=_,e.length=g,e.squaredLength=E,e.negate=O,e.inverse=x,e.normalize=w,e.dot=T,e.cross=R,e.lerp=P,e.random=A,e.transformMat2=I,e.transformMat2d=S,e.transformMat3=j,e.transformMat4=L,e.str=N,e.exactEquals=D,e.equals=F;var C=n(2),U=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(C);e.len=g,e.sub=s,e.mul=f,e.div=l,e.dist=y,e.sqrDist=_,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,r,o,a,i){var u=void 0,c=void 0;for(n||(n=2),r||(r=0),c=o?Math.min(o*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],a(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}()},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var o=(0,a.getContext)();this.boundLocation=n,this.data=new Float32Array(e),this.buffer=o.createBuffer(),o.bindBuffer(o.UNIFORM_BUFFER,this.buffer),o.bufferData(o.UNIFORM_BUFFER,this.data,o.STATIC_DRAW),o.bindBuffer(o.UNIFORM_BUFFER,null)}return o(t,[{key:"bind",value:function(){function t(){var t=(0,a.getContext)();t.bindBufferBase(t.UNIFORM_BUFFER,this.boundLocation,this.buffer)}return t}()},{key:"update",value:function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,a.getContext)();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null)}return t}()}]),t}();e.default=i},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Perspective=e.Orthographic=void 0;var o=n(29),a=r(o),i=n(31),u=r(i);e.Orthographic=a.default,e.Perspective=u.default},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=n(4),s=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:.1,far:100}),Object.assign(n.position,Object.assign({x:0,y:0,z:99},t.position)),n.target=u.vec3.create(),n.up=u.vec3.fromValues(0,1,0),n.projectionMatrix=u.mat4.create(),n}return a(e,t),i(e,[{key:"lookAt",value:function(){function t(t){u.vec3.copy(this.target,t)}return t}()},{key:"updateCameraMatrix",value:function(){function t(){u.mat4.ortho(this.projectionMatrix,-1,1,-1,1,this.near,this.far)}return t}()}]),e}(s.default);e.default=f},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.data=a.vec3.fromValues(e,n,o)}return o(t,[{key:"set",value:function(){function t(t,e,n){this.x=t,this.y=e,this.z=n}return t}()},{key:"x",set:function(){function t(t){a.vec3.set(this.data,t,this.data[1],this.data[2])}return t}(),get:function(){function t(){return this.data[0]}return t}()},{key:"y",set:function(){function t(t){a.vec3.set(this.data,this.data[0],t,this.data[2])}return t}(),get:function(){function t(){return this.data[1]}return t}()},{key:"z",set:function(){function t(t){a.vec3.set(this.data,this.data[0],this.data[1],t)}return t}(),get:function(){function t(){return this.data[2]}return t}()}]),t}();e.default=i},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=n(4),s=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:1,far:1e3,fov:35}),Object.assign(n.position,Object.assign({x:0,y:100,z:500},t.position)),n.target=u.vec3.create(),n.up=u.vec3.fromValues(0,1,0),n.projectionMatrix=u.mat4.create(),n}return a(e,t),i(e,[{key:"lookAt",value:function(){function t(t){u.vec3.copy(this.target,t)}return t}()},{key:"updateCameraMatrix",value:function(){function t(t,e){u.mat4.perspective(this.projectionMatrix,this.fov*(Math.PI/180),t/e,this.near,this.far)}return t}()}]),e}(s.default);e.default=f},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(3),f=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.ambient=[],t.directional=[],t.point=[],t}return a(e,t),i(e,[{key:"traverse",value:function(){function t(t){void 0===t&&(t=this);for(var e=0;e<t.children.length;e++)this.traverse(t.children[e]);null!==t.parent&&t.updateMatrices()}return t}()},{key:"addLight",value:function(){function t(t){switch(t.type){case s.AMBIENT_LIGHT:this.ambient.push(t);break;case s.DIRECTIONAL_LIGHT:this.directional.push(t);break;case s.POINT_LIGHT:this.point.push(t)}}return t}()},{key:"removeLight",value:function(){function t(t){var e=this.ambient.indexOf(t);-1!==e&&(t.destroy(),this.ambient.splice(e,1)),e=this.directional.indexOf(t),-1!==e&&(t.destroy(),this.directional.splice(e,1)),-1!==(e=this.point.indexOf(t))&&(t.destroy(),this.point.splice(e,1))}return t}()}]),e}(c.default);e.default=f},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Sem=e.Raw=e.FlatShading=e.Default=e.Basic=void 0;var o=n(10),a=r(o),i=n(40),u=r(i),c=n(41),s=r(c),f=n(42),l=r(f),h=n(43),v=r(h);e.Basic=a.default,e.Default=u.default,e.FlatShading=s.default,e.Raw=l.default,e.Sem=v.default},function(t,e,n){function r(t){return s.vec3.fromValues(t[0]/255,t[1]/255,t[2]/255)}function o(t){var e=t>>16,n=t>>8&255,r=255&t;return s.vec3.fromValues(e,n,r)}function a(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?s.vec3.fromValues(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function i(t){var e=t.toString(16);return 1===e.length?"0"+String(e):e}function u(t,e,n){var r=i(t),o=i(e),a=i(n);return"#"+String(r)+String(o)+String(a)}function c(t){var e=s.vec3.create(),n="number"==typeof t?o(t):a(t);return s.vec3.copy(e,r(n)),e}Object.defineProperty(e,"__esModule",{value:!0}),e.hexIntToRgb=o,e.hexStringToRgb=a,e.componentToHex=i,e.rgbToHex=u,e.convert=c;var s=n(1)},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),i=function(){function t(){r(this,t);var e=(0,a.getContext)();this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)}return o(t,[{key:"bind",value:function(){function t(){(0,a.getContext)().bindVertexArray(this.vao)}return t}()},{key:"unbind",value:function(){function t(){(0,a.getContext)().bindVertexArray(null)}return t}()},{key:"destroy",value:function(){function t(){(0,a.getContext)().deleteVertexArray(this.vao),this.vao=null}return t}()}]),t}();e.default=i},function(t,e){function n(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(r);console.error("Error compiling shader",o),t.deleteShader(r)}return r}Object.defineProperty(e,"__esModule",{value:!0});e.createProgram=function(t,e,r){var o=n(t,e,t.VERTEX_SHADER),a=n(t,r,t.FRAGMENT_SHADER),i=t.createProgram();return t.attachShader(i,o),t.attachShader(i,a),t.linkProgram(i),i}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={before:function(){function t(){return"\n        struct Directional {\n            vec4 dlPosition;\n            vec4 dlColor;\n            float flIntensity;\n        };\n\n        uniform directional {\n            Directional directionalLights[MAX_DIRECTIONAL];\n        };\n        "}return t}(),main:function(){function t(){return"\n            vec3 dcolor = vec3(0.0);\n            for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n                vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz);\n\n                vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n                vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n                dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            }\n            dcolor /= float(MAX_DIRECTIONAL);\n            base.rgb *= dcolor;\n        "}return t}()},r={before:function(){function t(){return""}return t}(),main:function(){function t(){return""}return t}()};e.DIRECTIONAL=n,e.POINT=r},function(t,e){function n(){return"\n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;"}Object.defineProperty(e,"__esModule",{value:!0});var r={linear:function(){function t(){return String(n())+"\n\n        fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"}return t}(),exponential:function(){function t(){return String(n())+"\n        fogFactor = 1.0 / exp(dist * fogDensity);\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"}return t}(),exponential2:function(){function t(){return String(n())+"\n        fogFactor = 1.0 /exp( (dist * fogDensity) * (dist * fogDensity) );\n        fogFactor = clamp(fogFactor, 0.0, 1.0);\n        base = mix(fogColor, base, fogFactor);"}return t}()};e.FOG=r},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={scene:function(){function t(){return"\n        uniform perScene {\n            mat4 projectionMatrix;\n            mat4 viewMatrix;\n            vec4 fogSettings;\n            vec4 fogColor;\n            float iGlobalTime;\n        };"}return t}(),model:function(){function t(){return"\n        uniform perModel {\n            mat4 modelMatrix;\n            mat4 normalMatrix;\n        };"}return t}()};e.UBO=n},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),c=n(3),s=n(8),f=r(s),l=n(6),h=r(l),v=n(5),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=c.DEFAULT_MATERIAL,n.map=new h.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{color:{type:"vec3",value:u.color.convert(t&&t.color||16777215)},map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = position;\n\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n        ",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+String(c.MAX_DIRECTIONAL)+"\n\nprecision highp float;\nprecision highp int;\n\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\n"+String(v.DIRECTIONAL.before())+"\n\nuniform vec3 color;\nuniform sampler2D map;\n\nin vec2 v_uv;\nin vec3 v_normal;\n\nout vec4 outColor;\n\nvoid main() {\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n    base += vec4(color, 1.0);\n\n    "+String(v.DIRECTIONAL.main())+"\n    "+String(v.FOG.linear())+"\n\n    outColor = base;\n}\n        ",n}return i(e,t),e}(f.default);e.default=d},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),c=n(3),s=n(8),f=r(s),l=n(6),h=r(l),v=n(5),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=c.FLATSHADING_MATERIAL,n.map=new h.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{color:{type:"vec3",value:u.color.convert(t&&t.color||16777215)},map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 fragVertexEc;\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = position;\n\n    fragVertexEc = position.xyz;\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n        ",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+String(c.MAX_DIRECTIONAL)+"\n\nprecision highp float;\nprecision highp int;\n\n"+String(v.UBO.scene())+"\n"+String(v.UBO.model())+"\n\n"+String(v.DIRECTIONAL.before())+"\n\nuniform vec3 color;\nuniform sampler2D map;\n\nin vec3 fragVertexEc;\nin vec2 v_uv;\nin vec3 v_normal;\n\nout vec4 outColor;\n\nvoid main() {\n    vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n    base += vec4(color, 1.0);\n\n    "+String(v.DIRECTIONAL.main())+"\n    "+String(v.FOG.linear())+"\n\n    outColor = base;\n}\n        ",n}return i(e,t),e}(f.default);e.default=d},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),u=n(8),c=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(5),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=i.RAW_MATERIAL,Object.assign(n.uniforms,t.uniforms),n.vertex=t.vertex||"#version 300 es\n"+String(s.UBO.scene())+"\n"+String(s.UBO.model())+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\nout vec3 v_normal;\n\nvoid main() {\n    vec4 position = viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = projectionMatrix * position;\n    v_uv = a_uv;\n    v_normal = normalize(mat3(normalMatrix) * a_normal);\n}\n        ",n.fragment=t.fragment||"#version 300 es\n\n#define MAX_DIRECTIONAL "+String(i.MAX_DIRECTIONAL)+"\n\nprecision highp float;\nprecision highp int;\n\n"+String(s.UBO.scene())+"\n"+String(s.UBO.model())+"\n\n"+String(s.DIRECTIONAL.before())+"\n\nin vec2 v_uv;\nin vec3 v_normal;\n\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(v_normal, 1.0);\n}\n        ",n}return a(e,t),e}(c.default);e.default=f},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),c=n(8),s=r(c),f=n(6),l=r(f),h=n(5),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=u.SEM_MATERIAL,n.map=new l.default,t.map&&n.map.fromImage(t.map),Object.assign(n.uniforms,{map:{type:"sampler2D",value:n.map.texture}}),n.vertex="#version 300 es\n"+String(h.UBO.scene())+"\n"+String(h.UBO.model())+"\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec2 v_uv;\n\nvoid main() {\n    vec4 position = viewMatrix * modelMatrix * vec4(a_position, 1.0);\n    gl_Position = projectionMatrix * position;\n\n    vec3 v_e = vec3(position);\n    vec3 v_n = mat3(viewMatrix * modelMatrix) * a_normal;\n    vec3 r = reflect(normalize(v_e), normalize(v_n));\n    float m = 2.0 * sqrt(pow(r.x, 2.0) + pow(r.y, 2.0) + pow(r.z + 1.0, 2.0));\n    v_uv = r.xy / m + 0.5;\n}\n        ",n.fragment="#version 300 es\n\n#define MAX_DIRECTIONAL "+String(u.MAX_DIRECTIONAL)+"\n\nprecision highp float;\nprecision highp int;\n\n"+String(h.UBO.scene())+"\n"+String(h.UBO.model())+"\n\n"+String(h.DIRECTIONAL.before())+"\n\nuniform sampler2D map;\n\nin vec2 v_uv;\n\nout vec4 outColor;\n\nvoid main() {\n    vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n    base += texture(map, v_uv);\n\n    "+String(h.FOG.linear())+"\n\n    outColor = base;\n}\n        ",n}return i(e,t),e}(s.default);e.default=v},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Plane=e.Line=e.Icosahedron=e.Box=void 0;var o=n(45),a=r(o),i=n(46),u=r(i),c=n(18),s=r(c),f=n(47),l=r(f);e.Box=a.default,e.Icosahedron=u.default,e.Line=s.default,e.Plane=l.default},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n(this,t);for(var a=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=0;i<a.length;i+=3)a[i+0]*=e,a[i+1]*=r,a[i+2]*=o;return{positions:a,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}}return t}();e.default=r},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(11),i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);for(var o=.5+Math.sqrt(5)/2,i=[-1,+o,0,1,+o,0,-1,-o,0,1,-o,0,0,-1,+o,0,1,+o,0,-1,-o,0,1,-o,+o,0,-1,+o,0,1,-o,0,-1,-o,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],c=[],s={faces:(0,a.unflatten)(u,3),positions:(0,a.unflatten)(i,3)},f=Math.min(n,3);f-- >0;)s=this.subdivide(s);for(var l=0;l<s.positions.length;l++){var h=this.normalize(s.positions[l]),v=.5*(-Math.atan2(h[2],-h[0])/Math.PI+1),d=.5+Math.asin(h[1])/Math.PI;c.push([1-v,1-d])}i=s.positions;for(var p=0;p<i.length;p++)this.scale(i[p],e);var m={positions:(0,a.flatten)(s.positions),indices:(0,a.flatten)(s.faces),normals:null,uvs:(0,a.flatten)(c,2)};return m.normals=(0,a.generateVertexNormals)(m.positions,m.indices),m}return o(t,[{key:"fixPoleUVs",value:function(){function t(t,e,n){function r(e,r,o,a){var s=n[o],f=n[a];n[r][0]=(s[0]+f[0])/2,c++,i.push(t[r].slice()),u.push(n[r].slice()),e[0]=c}var o=this.firstYIndex(t,1),a=this.firstYIndex(t,-1);if(-1!==o&&-1!==a){for(var i=t.slice(),u=n.slice(),c=i.length-1,s=0;s<e.length;s++){var f=e[s],l=f[0],h=f[1],v=f[2];l===o?r(f,o,h,v):l===a&&r(f,a,h,v)}t=i,n=u}}return t}()},{key:"firstYIndex",value:function(){function t(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}return t}()},{key:"normalize",value:function(){function t(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}return t}()},{key:"scale",value:function(){function t(t,e){for(var n=0;n<t.length;n++)t[n]*=e;return t}return t}()},{key:"subdivide",value:function(){function t(t){function e(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function n(t){return String(t[0].toPrecision(6))+","+String(t[1].toPrecision(6))+","+String(t[2].toPrecision(6))}function r(t,r){var o=e(t,r),a=n(o),i=c[a];return i||(c[a]=o,c[a])}for(var o=t.positions,a=t.faces,i=[],u=[],c={},s=0,f=0;f<a.length;f++){var l=a[f],h=l[0],v=l[1],d=l[2],p=o[h],m=o[v],b=o[d],M=r(p,m),y=r(m,b),_=r(b,p),g=u.indexOf(M);-1===g&&(g=s++,u.push(M));var E=u.indexOf(y);-1===E&&(E=s++,u.push(y));var O=u.indexOf(_);-1===O&&(O=s++,u.push(_));var x=u.indexOf(p);-1===x&&(x=s++,u.push(p));var w=u.indexOf(m);-1===w&&(w=s++,u.push(m));var T=u.indexOf(b);-1===T&&(T=s++,u.push(b)),i.push([x,g,O]),i.push([w,E,g]),i.push([T,O,E]),i.push([g,E,O])}return{faces:i,positions:u}}return t}()}]),t}();e.default=i},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";n(this,t);for(var u=[],c=[],s=[],f=[],l=0,h=2*e,v=2*r,d=h/o,p=v/a,m=.5*-h,b=.5*-v,M=1/o,y=1/a,_=0;_<a;_++)for(var g=0;g<o;g++){var E=d*g+m,O=p*_+b,x=g/o,w=_/a;switch(i){case"XZ":u=u.concat([E,0,O]),u=u.concat([E+d,0,O]),u=u.concat([E+d,0,O+p]),u=u.concat([E,0,O+p]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),f=f.concat([x,1-w]),f=f.concat([x+M,1-w]),f=f.concat([x+M,1-(w+y)]),f=f.concat([x,1-(w+y)]);break;case"YZ":u=u.concat([0,O,E]),u=u.concat([0,O,E+d]),u=u.concat([0,O+p,E+d]),u=u.concat([0,O+p,E]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),f=f.concat([1-x,w]),f=f.concat([1-(x+M),w]),f=f.concat([1-(x+M),w+y]),f=f.concat([1-x,w+y]);break;default:u=u.concat([E,O,0]),u=u.concat([E+d,O,0]),u=u.concat([E+d,O+p,0]),u=u.concat([E,O+p,0]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),f=f.concat([x,w]),f=f.concat([x+M,w]),f=f.concat([x+M,w+y]),f=f.concat([x,w+y])}c.push(4*l+0),c.push(4*l+1),c.push(4*l+2),c.push(4*l+0),c.push(4*l+2),c.push(4*l+3),l++}return{positions:u,indices:c,normals:s,uvs:f}}return t}();e.default=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Directional=void 0;var r=n(49),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Directional=o.default},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(u),s=n(7),f=n(3),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=f.DIRECTIONAL_LIGHT,n.guiColor=t&&t.color||14606046,n._color=s.color.convert(n.guiColor),n.intensity=t.intensity||.5,n}return a(e,t),i(e,[{key:"destroy",value:function(){function t(){}return t}()},{key:"color",set:function(){function t(t){this._color=s.color.convert(t)}return t}(),get:function(){function t(){return this._color}return t}()}]),e}(c.default);e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Orbit=void 0;var r=n(51),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Orbit=o.default},function(t,e,n){(function(t){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),i=n(17),u=n(0),c=.5*-Math.PI,s=function(){function e(n){var o=this;r(this,e),this.onStart=function(t){t.preventDefault(),o.oy=o.ry,o.ox=o.rx,o.startY=t.pageX/o.width,o.startX=t.pageY/o.height,o.isDown=!0},this.onMove=function(t){if(o.isDown){var e=t.pageX/o.width,n=t.pageY/o.height;o.rx=o.ox+-(o.startX-n)*o.rotationSpeed,o.ry=o.oy+(o.startY-e)*o.rotationSpeed,o.rx=(0,i.clamp)(o.rx,.5*-Math.PI,.5*Math.PI)}},this.onEnd=function(){o.isDown=!1},this.onWheel=function(t){t.preventDefault(),o.zoom(-t.deltaY)};var a=(0,u.getContext)();this.camera=n,this.domElement=a.canvas,this.radius=Math.max(n.position.x,n.position.z),this.rx=Math.atan2(n.position.y,this.radius),this.ry=Math.atan2(n.position.z,n.position.x)+c,this.ox=0,this.oy=0,this.width=t.innerWidth,this.height=t.innerHeight,this.rotationSpeed=5*t.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this.enable()}return o(e,[{key:"enable",value:function(){function e(){this.domElement.addEventListener("mousedown",this.onStart,!1),this.domElement.addEventListener("mousemove",this.onMove,!1),this.domElement.addEventListener("mouseup",this.onEnd,!1),this.domElement.addEventListener("touchstart",this.onStart,!1),this.domElement.addEventListener("touchmove",this.onMove,!1),this.domElement.addEventListener("touchend",this.onEnd,!1),t.addEventListener("wheel",this.onWheel,!1)}return e}()},{key:"disable",value:function(){function e(){this.domElement.removeEventListener("mousedown",this.onStart,!1),this.domElement.removeEventListener("mousemove",this.onMove,!1),this.domElement.removeEventListener("mouseup",this.onEnd,!1),this.domElement.removeEventListener("touchstart",this.onStart,!1),this.domElement.removeEventListener("touchmove",this.onMove,!1),this.domElement.removeEventListener("touchend",this.onEnd,!1),t.removeEventListener("wheel",this.onWheel,!1)}return e}()},{key:"zoom",value:function(){function t(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=(0,i.clamp)(this.radius,this.zoomMin,this.zoomMax)}return t}()},{key:"update",value:function(){function t(){var t=this.radius*Math.sin(this.rx),e=this.radius*Math.cos(this.rx),n=Math.sin(this.ry)*e,r=Math.cos(this.ry)*e;a.vec3.set(this.camera.position.data,n,t,r)}return t}()}]),e}();e.default=s}).call(e,n(13))},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Obj=e.Json=e.File=void 0;var o=n(12),a=r(o),i=n(53),u=r(i),c=n(54),s=r(c);e.File=a.default,e.Json=u.default,e.Obj=s.default},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(12),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(11),c=function(){function t(){r(this,t)}return o(t,null,[{key:"load",value:function(){function e(e,n){i.default.load(e).then(function(e){n(t.parse(e))})}return e}()},{key:"parse",value:function(){function t(t){var e=JSON.parse(t);return void 0===e.normals&&(e.normals=(0,u.generateVertexNormals)(e.positions,e.indices)),{positions:e.positions,indices:e.indices,normals:e.normals}}return t}()}]),t}();e.default=c},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(12),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(){function t(){r(this,t)}return o(t,null,[{key:"load",value:function(){function e(e,n){i.default.load(e).then(function(e){n(t.parse(e))})}return e}()},{key:"parse",value:function(){function t(t){var e=[],n=[],r=[],o={};o.verts=[],o.norms=[],o.textures=[],o.hashindices={},o.indices=[],o.index=0;for(var a=t.split("\n"),i=/^v\s/,u=/^vn\s/,c=/^vt\s/,s=/^f\s/,f=/\s+/,l=0;l<a.length;l++){var h=a[l].trim(),v=h.split(f);if(v.shift(),i.test(h))e.push.apply(e,v);else if(u.test(h))n.push.apply(n,v);else if(c.test(h))r.push.apply(r,v);else if(s.test(h))for(var d=!1,p=0;p<v.length;p++){if(3!==p||d||(p=2,d=!0),v[p]in o.hashindices)o.indices.push(o.hashindices[v[p]]);else{var m=v[p].split("/");o.verts.push(+e[3*(m[0]-1)+0]),o.verts.push(+e[3*(m[0]-1)+1]),o.verts.push(+e[3*(m[0]-1)+2]),r.length&&(o.textures.push(+r[2*(m[1]-1)+0]),o.textures.push(+r[2*(m[1]-1)+1])),o.norms.push(+n[3*(m[2]-1)+0]),o.norms.push(+n[3*(m[2]-1)+1]),o.norms.push(+n[3*(m[2]-1)+2]),o.hashindices[v[p]]=o.index,o.indices.push(o.index),o.index++}3===p&&d&&o.indices.push(o.hashindices[v[0]])}}return{positions:o.verts,indices:o.indices,normals:o.norms,uvs:o.textures}}return t}()}]),t}();e.default=u},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Normal=e.lights=e.Axis=void 0;var o=n(56),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),i=n(58),u=r(i),c=n(59),s=r(c);e.Axis=u.default,e.lights=a,e.Normal=s.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Directional=void 0;var r=n(57),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.Directional=o.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(){function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)}return t}(),s=n(1),f=n(9),l=r(f),h=n(10),v=r(h),d=n(0),p=function(t){function e(t){o(this,e);var n={positions:[],indices:[]};n.positions.push(-25,25,0),n.positions.push(25,25,0),n.positions.push(25,-25,0),n.positions.push(-25,-25,0),n.positions.push(0,0,0),n.positions.push(0,0,0),n.indices.push(0,1,1,2,2,3,3,0,4,5);var r=new v.default({color:16777215}),i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.reference=t.light,i.material.glMode=d.GL_LINES,i.lookToTarget=!0,i}return i(e,t),u(e,[{key:"update",value:function(){function t(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),s.vec3.copy(this.position.data,this.reference.position.data),s.vec3.copy(this.rotation.data,this.reference.rotation.data),s.vec3.copy(this.scale.data,this.reference.scale.data);var t=s.vec3.subtract(this.position.data,this.position.data,this.reference.target);this.geometry.positions[this.geometry.positions.length-1]=-s.vec3.length(t),this.positionsNeedUpdate=!0}return t}()}]),e}(l.default);e.default=p},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),c=n(4),s=r(c),f=n(9),l=r(f),h=n(10),v=r(h),d=n(18),p=r(d),m=n(0),b=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||1,i=new p.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(r,0,0)),c=new p.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,r,0)),s=new p.default(u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,0,r)),f=new v.default({color:16711680}),h=new v.default({color:65280}),d=new v.default({color:255}),b=new l.default(i,f);n.addModel(b);var M=new l.default(c,h);n.addModel(M);var y=new l.default(s,d);return n.addModel(y),b.material.glMode=m.GL_LINES,M.material.glMode=m.GL_LINES,y.material.glMode=m.GL_LINES,n}return i(e,t),e}(s.default);e.default=b},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(){function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)}return t}(),s=n(1),f=n(9),l=r(f),h=n(10),v=r(h),d=n(0),p=function(t){function e(t){o(this,e);for(var n={positions:[],indices:[]},r=t.model.scale.x,i=t.model.scale.y,u=t.model.scale.z,c=t.model.geometry.normals.length/3,s=0;s<c;s++){var f=3*s,l=r*t.model.geometry.positions[f+0],h=i*t.model.geometry.positions[f+1],p=u*t.model.geometry.positions[f+2],m=t.model.geometry.normals[f+0],b=t.model.geometry.normals[f+1],M=t.model.geometry.normals[f+2],y=l+t.size*m,_=h+t.size*b,g=p+t.size*M;n.positions=n.positions.concat([l,h,p,y,_,g])}var E=new v.default({color:t&&t.color||16777215}),O=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,E));return O.reference=t.model,O.material.glMode=d.GL_LINES,O}return i(e,t),u(e,[{key:"update",value:function(){function t(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),s.vec3.copy(this.position.data,this.reference.position.data),s.vec3.copy(this.rotation.data,this.reference.rotation.data),this.lookToTarget=this.reference.lookToTarget}return t}()}]),e}(l.default);e.default=p}])});