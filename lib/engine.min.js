!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("engine",[],e):"object"==typeof exports?exports.engine=e():t.engine=e()}(this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/lib/",e(e.s=28)}([function(t,e){var a={};a.EPSILON=1e-6,a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,a.RANDOM=Math.random,a.ENABLE_SIMD=!1,a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this,a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE,a.setMatrixArrayType=function(t){a.ARRAY_TYPE=t};var n=Math.PI/180;a.toRadian=function(t){return t*n},a.equals=function(t,e){return Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=a},function(t,e,a){e.glMatrix=a(0),e.mat2=a(35),e.mat2d=a(36),e.mat3=a(8),e.mat4=a(37),e.quat=a(38),e.vec2=a(39),e.vec3=a(9),e.vec4=a(10)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.library="lowww WebGL engine",e.version="1.0.0",e.env="build",void 0);e.setContext=function(t){n=t},e.getContext=function(){return n}},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(1),i=a(24),u=function(t){return t&&t.__esModule?t:{default:t}}(i),l=0,s=0,c=o.vec3.create(),f=function(){function t(){n(this,t),this.uid=l++,this.position=new u.default,this.rotation=new u.default,this.scale=new u.default(1,1,1),this.quaternion=o.quat.create(),this.parent=null,this.children=[],this.parentMatrix=o.mat4.create(),this.modelMatrix=o.mat4.create()}return r(t,[{key:"updateMatrices",value:function(){o.mat4.identity(this.parentMatrix),o.mat4.identity(this.modelMatrix),o.quat.identity(this.quaternion),this.parent&&(o.mat4.copy(this.parentMatrix,this.parent.modelMatrix),o.mat4.multiply(this.modelMatrix,this.modelMatrix,this.parentMatrix)),o.mat4.translate(this.modelMatrix,this.modelMatrix,this.position.data),o.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),o.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),o.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),s=o.quat.getAxisAngle(c,this.quaternion),o.mat4.rotate(this.modelMatrix,this.modelMatrix,s,c),o.mat4.scale(this.modelMatrix,this.modelMatrix,this.scale.data)}}]),t}();e.default=f},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BASIC_MATERIAL=100},function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.color=e.math=e.geometry=void 0;var r=a(6),o=n(r),i=a(7),u=n(i),l=a(34),s=n(l);e.geometry=o,e.math=u,e.color=s},function(t,e,a){"use strict";function n(t){for(var e=[],a=0;a<t.length;a++)Array.isArray(t[a])||t[a]instanceof Float32Array?e=e.concat(n(t[a])):e.push(t[a]);return e}function r(t,e){for(var a=[],n=0;n<t.length;n+=e){for(var r=[],o=0;o<e;o++)r.push(t[n+o]);a.push(r)}return a}function o(t,e){for(var a=r(e,3),o=r(t,3),i=[],l=u.vec3.create(),s=u.vec3.create(),c=u.vec3.create(),f=void 0,h=void 0,M=void 0,d=0;d<a.length;d++){var v=a[d],m=v[0],x=v[1],p=v[2];f=o[m],h=o[x],M=o[p],u.vec3.subtract(l,M,h),u.vec3.subtract(s,f,h),u.vec3.cross(c,l,s),void 0===i[m]&&(i[m]=u.vec3.create()),void 0===i[x]&&(i[x]=u.vec3.create()),void 0===i[p]&&(i[p]=u.vec3.create()),u.vec3.add(i[m],i[m],c),u.vec3.add(i[x],i[x],c),u.vec3.add(i[p],i[p],c)}for(var S=0;S<i.length;S++)u.vec3.normalize(i[S],i[S]);return n(i,3)}function i(t){for(var e=r(t.positions,3),a={},i=[],u=[],l=Math.pow(10,4),s=0;s<e.length;s++){var c=e[s],f="\n            "+Math.round(c[0]*l)+"_\n            "+Math.round(c[1]*l)+"_\n            "+Math.round(c[2]*l)+"\n        ";void 0===a[f]?(a[f]=s,i.push(e[s]),u[s]=i.length-1):u[s]=u[a[f]]}for(var h=[],M=r(t.indices,3),d=0;d<M.length;d++){var v=M[d];v[0]=u[v[0]],v[1]=u[v[1]],v[2]=u[v[2]];for(var m=[v[0],v[1],v[2]],x=0;x<3;x++)if(m[x]===m[(x+1)%3]){h.push(d);break}}var p=n(i,3),S=n(M,3);return{positions:new Float32Array(p),indices:new Uint16Array(S),normals:new Float32Array(o(p,S))}}Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=n,e.unflatten=r,e.generateVertexNormals=o,e.mergeVertices=i;var u=a(1);a(40)},function(t,e,a){"use strict";function n(t,e,a){return Math.max(Math.min(t,a),e)}function r(t){return 0==(t&t-1)}function o(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=n,e.isPowerOf2=r,e.randomRange=o},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,a,r,o,i,u,l,s){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=a,c[3]=r,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},r.set=function(t,e,a,n,r,o,i,u,l,s){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){if(t===e){var a=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=a,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=c*i-u*s,h=-c*o+u*l,M=s*o-i*l,d=a*f+n*h+r*M;return d?(d=1/d,t[0]=f*d,t[1]=(-c*n+r*s)*d,t[2]=(u*n-r*i)*d,t[3]=h*d,t[4]=(c*a-r*l)*d,t[5]=(-u*a+r*o)*d,t[6]=M*d,t[7]=(-s*a+n*l)*d,t[8]=(i*a-n*o)*d,t):null},r.adjoint=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=r*s-n*c,t[2]=n*u-r*i,t[3]=u*l-o*c,t[4]=a*c-r*l,t[5]=r*o-a*u,t[6]=o*s-i*l,t[7]=n*l-a*s,t[8]=a*i-n*o,t},r.determinant=function(t){var e=t[0],a=t[1],n=t[2],r=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+a*(-s*r+i*u)+n*(l*r-o*u)},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=a[0],M=a[1],d=a[2],v=a[3],m=a[4],x=a[5],p=a[6],S=a[7],b=a[8];return t[0]=h*n+M*i+d*s,t[1]=h*r+M*u+d*c,t[2]=h*o+M*l+d*f,t[3]=v*n+m*i+x*s,t[4]=v*r+m*u+x*c,t[5]=v*o+m*l+x*f,t[6]=p*n+S*i+b*s,t[7]=p*r+S*u+b*c,t[8]=p*o+S*l+b*f,t},r.mul=r.multiply,r.translate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=a[0],M=a[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*n+M*i+s,t[7]=h*r+M*u+c,t[8]=h*o+M*l+f,t},r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=Math.sin(a),M=Math.cos(a);return t[0]=M*n+h*i,t[1]=M*r+h*u,t[2]=M*o+h*l,t[3]=M*i-h*n,t[4]=M*u-h*r,t[5]=M*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},r.scale=function(t,e,a){var n=a[0],r=a[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a+a,u=n+n,l=r+r,s=a*i,c=n*i,f=n*u,h=r*i,M=r*u,d=r*l,v=o*i,m=o*u,x=o*l;return t[0]=1-f-d,t[3]=c-x,t[6]=h+m,t[1]=c+x,t[4]=1-s-d,t[7]=M-v,t[2]=h-m,t[5]=M+v,t[8]=1-s-f,t},r.normalFromMat4=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],v=e[13],m=e[14],x=e[15],p=a*u-n*i,S=a*l-r*i,b=a*s-o*i,I=n*l-r*u,D=n*s-o*u,F=r*s-o*l,y=c*v-f*d,g=c*m-h*d,w=c*x-M*d,E=f*m-h*v,_=f*x-M*v,O=h*x-M*m,P=p*O-S*_+b*E+I*w-D*g+F*y;return P?(P=1/P,t[0]=(u*O-l*_+s*E)*P,t[1]=(l*w-i*O-s*g)*P,t[2]=(i*_-u*w+s*y)*P,t[3]=(r*_-n*O-o*E)*P,t[4]=(a*O-r*w+o*g)*P,t[5]=(n*w-a*_-o*y)*P,t[6]=(v*F-m*D+x*I)*P,t[7]=(m*b-d*F-x*S)*P,t[8]=(d*D-v*b+x*p)*P,t):null},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=e[0],M=e[1],d=e[2],v=e[3],m=e[4],x=e[5],p=t[6],S=e[7],b=e[8];return Math.abs(a-h)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(r-M)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-v)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(s-p)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-S)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-b)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.fromValues=function(t,e,a){var r=new n.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=a,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,a,n){return t[0]=e,t[1]=a,t[2]=n,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(a*a+n*n+r*r)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return a*a+n*n+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1],n=t[2];return Math.sqrt(e*e+a*a+n*n)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1],n=t[2];return e*e+a*a+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=e[2],o=a*a+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},r.cross=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],u=a[1],l=a[2];return t[0]=r*l-o*u,t[1]=o*i-n*l,t[2]=n*u-r*i,t},r.lerp=function(t,e,a,n){var r=e[0],o=e[1],i=e[2];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t[2]=i+n*(a[2]-i),t},r.hermite=function(t,e,a,n,r,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+a[0]*l+n[0]*s+r[0]*c,t[1]=e[1]*u+a[1]*l+n[1]*s+r[1]*c,t[2]=e[2]*u+a[2]*l+n[2]*s+r[2]*c,t},r.bezier=function(t,e,a,n,r,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=e[0]*s+a[0]*c+n[0]*f+r[0]*h,t[1]=e[1]*s+a[1]*c+n[1]*f+r[1]*h,t[2]=e[2]*s+a[2]*c+n[2]*f+r[2]*h,t},r.random=function(t,e){e=e||1;var a=2*n.RANDOM()*Math.PI,r=2*n.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(a)*o,t[1]=Math.sin(a)*o,t[2]=r*e,t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[3]*n+a[7]*r+a[11]*o+a[15];return i=i||1,t[0]=(a[0]*n+a[4]*r+a[8]*o+a[12])/i,t[1]=(a[1]*n+a[5]*r+a[9]*o+a[13])/i,t[2]=(a[2]*n+a[6]*r+a[10]*o+a[14])/i,t},r.transformMat3=function(t,e,a){var n=e[0],r=e[1],o=e[2];return t[0]=n*a[0]+r*a[3]+o*a[6],t[1]=n*a[1]+r*a[4]+o*a[7],t[2]=n*a[2]+r*a[5]+o*a[8],t},r.transformQuat=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],u=a[1],l=a[2],s=a[3],c=s*n+u*o-l*r,f=s*r+l*n-i*o,h=s*o+i*r-u*n,M=-i*n-u*r-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t},r.rotateX=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.rotateY=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.rotateZ=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var u,l;for(a||(a=3),n||(n=0),l=r?Math.min(r*a+n,e.length):e.length,u=n;u<l;u+=a)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),r.angle=function(t,e){var a=r.fromValues(t[0],t[1],t[2]),n=r.fromValues(e[0],e[1],e[2]);r.normalize(a,a),r.normalize(n,n);var o=r.dot(a,n);return o>1?0:Math.acos(o)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=e[0],u=e[1],l=e[2];return Math.abs(a-i)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=r,o},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,a,n,r){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t[3]=e[3]*a[3],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t[3]=e[3]/a[3],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t[3]=Math.min(e[3],a[3]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t[3]=Math.max(e[3],a[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(a*a+n*n+r*r+o*o)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return a*a+n*n+r*r+o*o},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+a*a+n*n+r*r)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1],n=t[2],r=t[3];return e*e+a*a+n*n+r*r},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*a+n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=a*i,t[1]=n*i,t[2]=r*i,t[3]=o*i),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.lerp=function(t,e,a,n){var r=e[0],o=e[1],i=e[2],u=e[3];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t[2]=i+n*(a[2]-i),t[3]=u+n*(a[3]-u),t},r.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),r.normalize(t,t),r.scale(t,t,e),t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3];return t[0]=a[0]*n+a[4]*r+a[8]*o+a[12]*i,t[1]=a[1]*n+a[5]*r+a[9]*o+a[13]*i,t[2]=a[2]*n+a[6]*r+a[10]*o+a[14]*i,t[3]=a[3]*n+a[7]*r+a[11]*o+a[15]*i,t},r.transformQuat=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],u=a[1],l=a[2],s=a[3],c=s*n+u*o-l*r,f=s*r+l*n-i*o,h=s*o+i*r-u*n,M=-i*n-u*r-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t[3]=e[3],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var u,l;for(a||(a=4),n||(n=0),l=r?Math.min(r*a+n,e.length):e.length,u=n;u<l;u+=a)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=r},function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Perspective=e.Orthographic=void 0;var r=a(20),o=n(r),i=a(21),u=n(i);e.Orthographic=o.default,e.Perspective=u.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Orbit=void 0;var n=a(22),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.Orbit=r.default},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),u=a(3),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=a(2),c=function(t){function e(t,a){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.geometry={positions:new Float32Array(t.positions),indices:new Uint16Array(t.indices),normals:new Float32Array(t.normals||[]),uvs:new Float32Array(t.uvs||[])},o.material=a,Object.assign(o.material.attributes,{a_position:{type:"vec3",value:o.geometry.positions},a_normal:{type:"vec3",value:o.geometry.normals},a_uv:{type:"vec2",value:o.geometry.uvs}}),Object.assign(o.material.uniforms,{}),Object.assign(o.material,{indices:o.geometry.indices}),o}return o(e,t),i(e,[{key:"init",value:function(){this.material.init()}},{key:"bind",value:function(){this.material.bind()}},{key:"update",value:function(){var t=(0,s.getContext)();this.material.update(),t.drawElements(t.TRIANGLES,this.geometry.indices.length,t.UNSIGNED_SHORT,0)}},{key:"unbind",value:function(){this.material.unbind()}},{key:"destroy",value:function(){this.material.destroy()}}]),e}(l.default);e.default=c},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),u=a(3),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.lights=[],t}return o(e,t),i(e,[{key:"addModel",value:function(t){t.parent=this,this.children.push(t)}},{key:"removeModel",value:function(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1))}},{key:"traverse",value:function(t){void 0===t&&(t=this);for(var e=0;e<t.children.length;e+=1)this.traverse(t.children[e]);null!==t.parent&&t.updateMatrices()}}]),e}(l.default);e.default=s},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Plane=e.Icosahedron=e.Box=void 0;var r=a(25),o=n(r),i=a(26),u=n(i),l=a(27),s=n(l);e.Box=o.default,e.Icosahedron=u.default,e.Plane=s.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Obj=void 0;var n=a(29),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.Obj=r.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Basic=void 0;var n=a(30),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.Basic=r.default},function(t,e,a){"use strict";(function(t){function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),u=a(2),l=a(32),s=function(t){return t&&t.__esModule?t:{default:t}}(l),c=!1,f=void 0,h=void 0,M=i.mat4.create(),d=i.mat4.create(),v=i.mat4.create(),m=function(){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.ratio=t.devicePixelRatio;var o=a.canvas||this.createCanvas(),l=o.getContext("webgl2",{antialias:!1});if(l){if(!1!==a.greeting){var f,h="color:#f33;font-size:x-small",M=["%c"+u.library+"\n%cversion: %c"+u.version+" %crunning: %c"+l.getParameter(l.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",h,"color:#777;font-size:x-small",h];(f=console).log.apply(f,M)}(0,u.setContext)(l),this.perScene=new s.default([].concat(n(i.mat4.create()),n(i.mat4.create())),20),this.perModel=new s.default([].concat(n(i.mat4.create()),n(i.mat4.create()),n(i.vec4.create())),1),c=!0}else alert("webgl2 not supported")}return o(e,[{key:"createCanvas",value:function(){var e=document.createElement("canvas");return e.style.display="block",e.style.boxSizing="border-box",e.style.width=t.innerWidth*t.devicePixelRatio,e.style.height=t.innerHeight*t.devicePixelRatio,document.body.appendChild(e),e}},{key:"setSize",value:function(t,e){var a=t*this.ratio,n=e*this.ratio,r=(0,u.getContext)();r.canvas.width=a,r.canvas.height=n,r.canvas.style.width=a/this.ratio+"px",r.canvas.style.height=n/this.ratio+"px"}},{key:"setRatio",value:function(t){this.ratio=t}},{key:"render",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(c){var r=(0,u.getContext)();r.viewport(0,0,r.canvas.width,r.canvas.height),a&&(r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),r.enable(r.CULL_FACE),r.enable(r.DEPTH_TEST),e.updateCameraMatrix(r.canvas.width,r.canvas.height),i.mat4.identity(M),i.mat4.lookAt(M,e.position.data,e.target,e.up),i.mat4.identity(d),i.mat4.invert(d,M),t.traverse(),this.perScene.update([].concat(n(e.projectionMatrix),n(M)));for(var o=0,l=t.children.length;o<l;o++){if(f=t.children[o],!f.material.program)return void f.init();if(h!==f.material.program){h=f.material.program,r.useProgram(h);var s=r.getUniformBlockIndex(h,"perScene"),m=r.getUniformBlockIndex(h,"perModel");r.uniformBlockBinding(h,s,this.perScene.boundLocation),r.uniformBlockBinding(h,m,this.perModel.boundLocation)}i.mat4.identity(v),i.mat4.copy(v,d),i.mat4.transpose(v,v),f.bind(),this.perModel.update([].concat(n(f.modelMatrix),n(v),n(f.material.color))),f.update(),f.unbind(),f=null}}}}]),e}();e.default=m}).call(e,a(11))},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},u=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),l=a(1),s=a(3),c=function(t){return t&&t.__esModule?t:{default:t}}(s),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(a,{near:.1,far:100}),Object.assign(a.position,i({x:0,y:0,z:99},t.position)),a.target=l.vec3.create(),a.up=l.vec3.fromValues(0,1,0),a.projectionMatrix=l.mat4.create(),a}return o(e,t),u(e,[{key:"lookAt",value:function(t){l.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){l.mat4.ortho(this.projectionMatrix,-1,1,-1,1,this.near,this.far)}}]),e}(c.default);e.default=f},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},u=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),l=a(1),s=a(3),c=function(t){return t&&t.__esModule?t:{default:t}}(s),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(a,{near:.1,far:1e3,fov:35}),Object.assign(a.position,i({x:0,y:100,z:500},t.position)),a.target=l.vec3.create(),a.up=l.vec3.fromValues(0,1,0),a.projectionMatrix=l.mat4.create(),a}return o(e,t),u(e,[{key:"lookAt",value:function(t){l.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){l.mat4.perspective(this.projectionMatrix,this.fov*Math.PI/180,t/e,this.near,this.far)}}]),e}(c.default);e.default=f},function(t,e,a){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(1),i=a(7),u=a(2),l=.5*-Math.PI,s=function(){function e(a){var r=this;n(this,e),this.onStart=function(t){t.preventDefault(),r.oy=r.ry,r.ox=r.rx,r._startY=t.pageX/r.width,r._startX=t.pageY/r.height,r.isDown=!0},this.onMove=function(t){if(r.isDown){var e=t.pageX/r.width,a=t.pageY/r.height;r.rx=r.ox+-(r._startX-a)*r.rotationSpeed,r.ry=r.oy+(r._startY-e)*r.rotationSpeed,r.rx=(0,i.clamp)(r.rx,.5*-Math.PI,.5*Math.PI)}},this.onEnd=function(){r.isDown=!1},this.onWheel=function(t){t.preventDefault();var e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=t.detail),r.zoom(-e)};var o=(0,u.getContext)();this.camera=a,this.domElement=o.canvas,this.radius=Math.max(a.position.x,a.position.z),this.rx=Math.atan2(a.position.y,this.radius),this.ry=Math.atan2(a.position.z,a.position.x)+l,this.ox=0,this.oy=0,this.width=t.innerWidth,this.height=t.innerHeight,this.rotationSpeed=5*t.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this.enable()}return r(e,[{key:"enable",value:function(){this.domElement.addEventListener("mousedown",this.onStart,!1),this.domElement.addEventListener("mousemove",this.onMove,!1),this.domElement.addEventListener("mouseup",this.onEnd,!1),this.domElement.addEventListener("touchstart",this.onStart,!1),this.domElement.addEventListener("touchmove",this.onMove,!1),this.domElement.addEventListener("touchend",this.onEnd,!1),t.addEventListener("mousewheel",this.onWheel,!1)}},{key:"disable",value:function(){this.domElement.removeEventListener("mousedown",this.onStart,!1),this.domElement.removeEventListener("mousemove",this.onMove,!1),this.domElement.removeEventListener("mouseup",this.onEnd,!1),this.domElement.removeEventListener("touchstart",this.onStart,!1),this.domElement.removeEventListener("touchmove",this.onMove,!1),this.domElement.removeEventListener("touchend",this.onEnd,!1),t.removeEventListener("mousewheel",this.onWheel,!1)}},{key:"zoom",value:function(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=(0,i.clamp)(this.radius,this.zoomMin,this.zoomMax)}},{key:"update",value:function(){var t=this.radius*Math.sin(this.rx),e=this.radius*Math.cos(this.rx),a=Math.sin(this.ry)*e,n=Math.cos(this.ry)*e;o.vec3.set(this.camera.position.data,a,t,n)}}]),e}();e.default=s}).call(e,a(11))},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(33),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=a(31),l=a(2),s={},c=function(){function t(){n(this,t),this.defines={},this.attributes={},this.uniforms={},this.vertex="",this.fragment="",this.vao=new i.default,this.program=null}return r(t,[{key:"generateShaders",value:function(){this.vertex=this.generateVertexShader(),this.fragment=this.generateFragmentShader()}},{key:"createProgram",value:function(){var t=(0,l.getContext)(),e="shader-"+this.type;if(void 0===s[e]){var a=(0,u.createProgram)(t,this.vertex,this.fragment);s[e]=a}this.program=s[e]}},{key:"initAttributes",value:function(){var t=(0,l.getContext)();for(var e in this.attributes){var a=this.attributes[e],n=t.getAttribLocation(this.program,e),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,a.value,t.STATIC_DRAW);var o=void 0;switch(a.type){case"vec3":case"vec2":o=3;break;default:o=1}Object.assign(a,{location:n,buffer:r,size:o})}this.indices&&(this.indexBuffer=t.createBuffer())}},{key:"initUniforms",value:function(){var t=this,e=(0,l.getContext)();for(var a in this.uniforms){var n=this.uniforms[a],r=e.getUniformLocation(this.program,a);Object.assign(n,{location:r})}var o=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5];Object.keys(this.uniforms).forEach(function(e,a){switch(t.uniforms[e].type){case"sampler2D":t.uniforms[e].textureIndex=a,t.uniforms[e].activeTexture=o[a]}})}},{key:"init",value:function(){this.generateShaders(),this.createProgram(),this.initAttributes(),this.initUniforms(),this.vao.bind(),this.bind(),this.vao.unbind(),this.unbind()}},{key:"destroy",value:function(){}},{key:"generateVertexShader",value:function(){return"#version 300 es\n\n            uniform perScene {\n                mat4 projection;\n                mat4 view;\n            };\n\n            uniform perModel {\n                mat4 model;\n                mat4 normal;\n                vec4 color;\n            };\n\n            in vec3 a_position;\n            in vec3 a_normal;\n\n            out vec3 v_color;\n\n            void main() {\n                gl_Position = projection * view * model * vec4(a_position, 1.0);\n\n                vec3 normal = normalize(mat3(normal) * a_normal);\n\n                // directional light\n                float weight = max(dot(normal, vec3(0.0, 0.0, 1.0)), 0.0);\n                v_color = vec3(0.2) + vec3(0.8) * weight; // ambient * directional color\n            }\n        "}},{key:"generateFragmentShader",value:function(){return"#version 300 es\n            precision highp float;\n            precision highp int;\n\n            uniform perModel {\n                mat4 model;\n                mat4 normal;\n                vec4 color;\n            };\n\n            in vec3 v_color;\n\n            out vec4 outColor;\n\n            void main() {\n                outColor = color * vec4(v_color, 1.0);\n            }\n        "}},{key:"bind",value:function(){var t=this,e=(0,l.getContext)();Object.keys(this.attributes).forEach(function(a){var n=t.attributes[a],r=n.location,o=n.buffer,i=n.size;-1!==r&&(e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(r,i,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null))}),this.indices&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW))}},{key:"unbind",value:function(){var t=(0,l.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=this,e=(0,l.getContext)();Object.keys(this.uniforms).forEach(function(a){var n=t.uniforms[a];switch(n.type){case"mat4":e.uniformMatrix4fv(n.location,!1,n.value);break;case"mat3":e.uniformMatrix3fv(n.location,!1,n.value);break;case"vec4":e.uniform4fv(n.location,n.value);break;case"vec3":e.uniform3fv(n.location,n.value);break;case"vec2":e.uniform2fv(n.location,n.value);break;case"float":e.uniform1f(n.location,n.value);break;case"sampler2D":e.uniform1i(n.location,n.textureIndex),e.activeTexture(n.activeTexture),e.bindTexture(e.TEXTURE_2D,n.value);break;default:console.warn("unknown",n.type)}})}}]),t}();e.default=c},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(1),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.data=o.vec3.fromValues(e,a,r)}return r(t,[{key:"x",set:function(t){o.vec3.set(this.data,t,this.data[1],this.data[2])},get:function(){return this.data[0]}},{key:"y",set:function(t){o.vec3.set(this.data,this.data[0],t,this.data[2])},get:function(){return this.data[1]}},{key:"z",set:function(t){o.vec3.set(this.data,this.data[0],this.data[1],t)},get:function(){return this.data[2]}}]),t}();e.default=i},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n(this,t);for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=0;i<o.length;i+=3)o[i+0]*=e,o[i+1]*=a,o[i+2]*=r;return{positions:o,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]}};e.default=r},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(6),i=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t);for(var r=.5+Math.sqrt(5)/2,i=[-1,+r,0,1,+r,0,-1,-r,0,1,-r,0,0,-1,+r,0,1,+r,0,-1,-r,0,1,-r,+r,0,-1,+r,0,1,-r,0,-1,-r,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l={faces:(0,o.unflatten)(u,3),positions:(0,o.unflatten)(i,3)},s=Math.min(a,3);s-- >0;)l=this.subdivide(l);i=l.positions;for(var c=0;c<i.length;c++)this.normalize(i[c]),this.scale(i[c],e);var f={positions:(0,o.flatten)(l.positions),indices:(0,o.flatten)(l.faces),normals:null};return f.normals=(0,o.generateVertexNormals)(f.positions,f.indices),f}return r(t,[{key:"normalize",value:function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a]*t[a];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var n=0;n<t.length;n++)t[n]/=e;return t}},{key:"scale",value:function(t,e){for(var a=0;a<t.length;a++)t[a]*=e;return t}},{key:"subdivide",value:function(t){function e(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function a(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}function n(t,n){var r=e(t,n),o=a(r),i=l[o];return i||(l[o]=r,l[o])}for(var r=t.positions,o=t.faces,i=[],u=[],l={},s=0,c=0;c<o.length;c++){var f=o[c],h=f[0],M=f[1],d=f[2],v=r[h],m=r[M],x=r[d],p=n(v,m),S=n(m,x),b=n(x,v),I=u.indexOf(p);-1===I&&(I=s++,u.push(p));var D=u.indexOf(S);-1===D&&(D=s++,u.push(S));var F=u.indexOf(b);-1===F&&(F=s++,u.push(b));var y=u.indexOf(v);-1===y&&(y=s++,u.push(v));var g=u.indexOf(m);-1===g&&(g=s++,u.push(m));var w=u.indexOf(x);-1===w&&(w=s++,u.push(x)),i.push([y,I,F]),i.push([g,D,I]),i.push([w,F,D]),i.push([I,D,F])}return{faces:i,positions:u}}}]),t}();e.default=i},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";n(this,t);for(var u=[],l=[],s=[],c=[],f=0,h=2*e,M=2*a,d=h/r,v=M/o,m=.5*-h,x=.5*-M,p=1/r,S=1/o,b=0;b<o;b+=1)for(var I=0;I<r;I+=1){var D=d*I+m,F=v*b+x,y=I/r,g=b/o;switch(i){case"XZ":u=u.concat([D,0,F]),u=u.concat([D+d,0,F]),u=u.concat([D+d,0,F+v]),u=u.concat([D,0,F+v]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),s=s.concat([0,1,0]),c=c.concat([y,1-g]),c=c.concat([y+p,1-g]),c=c.concat([y+p,1-(g+S)]),c=c.concat([y,1-(g+S)]);break;case"YZ":u=u.concat([0,F,D]),u=u.concat([0,F,D+d]),u=u.concat([0,F+v,D+d]),u=u.concat([0,F+v,D]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),s=s.concat([1,0,0]),c=c.concat([1-y,g]),c=c.concat([1-(y+p),g]),c=c.concat([1-(y+p),g+S]),c=c.concat([1-y,g+S]);break;default:u=u.concat([D,F,0]),u=u.concat([D+d,F,0]),u=u.concat([D+d,F+v,0]),u=u.concat([D,F+v,0]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),s=s.concat([0,0,1]),c=c.concat([y,g]),c=c.concat([y+p,g]),c=c.concat([y+p,g+S]),c=c.concat([y,g+S])}l.push(4*f+0),l.push(4*f+1),l.push(4*f+2),l.push(4*f+0),l.push(4*f+2),l.push(4*f+3),f+=1}return{positions:u,indices:l,normals:s,uvs:c}};e.default=r},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.loaders=e.utils=e.controls=e.geometry=e.materials=e.Model=e.Scene=e.cameras=e.Renderer=e.constants=e.session=void 0;var o=a(2),i=r(o),u=a(19),l=n(u),s=a(12),c=r(s),f=a(15),h=n(f),M=a(14),d=n(M),v=a(18),m=r(v),x=a(16),p=r(x),S=a(13),b=r(S),I=a(5),D=r(I),F=a(17),y=r(F),g=a(4),w=r(g);e.session=i,e.constants=w,e.Renderer=l.default,e.cameras=c,e.Scene=h.default,e.Model=d.default,e.materials=m,e.geometry=p,e.controls=b,e.utils=D,e.loaders=y},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"parse",value:function(t){var e=[],a=[],n=[],r={};r.verts=[],r.norms=[],r.textures=[],r.hashindices={},r.indices=[],r.index=0;for(var o=t.split("\n"),i=/^v\s/,u=/^vn\s/,l=/^vt\s/,s=/^f\s/,c=/\s+/,f=0;f<o.length;f++){var h=o[f].trim(),M=h.split(c);if(M.shift(),i.test(h))e.push.apply(e,M);else if(u.test(h))a.push.apply(a,M);else if(l.test(h))n.push.apply(n,M);else if(s.test(h))for(var d=!1,v=0;v<M.length;v++){if(3!==v||d||(v=2,d=!0),M[v]in r.hashindices)r.indices.push(r.hashindices[M[v]]);else{var m=M[v].split("/");r.verts.push(+e[3*(m[0]-1)+0]),r.verts.push(+e[3*(m[0]-1)+1]),r.verts.push(+e[3*(m[0]-1)+2]),n.length&&(r.textures.push(+n[2*(m[1]-1)+0]),r.textures.push(+n[2*(m[1]-1)+1])),r.norms.push(+a[3*(m[2]-1)+0]),r.norms.push(+a[3*(m[2]-1)+1]),r.norms.push(+a[3*(m[2]-1)+2]),r.hashindices[M[v]]=r.index,r.indices.push(r.index),r.index+=1}3===v&&d&&r.indices.push(r.hashindices[M[0]])}}return{positions:r.verts,indices:r.indices,normals:r.norms,uvs:r.textures}}},{key:"load",value:function(e,a){t.loadFile(e).then(function(e){a(t.parse(e))})}},{key:"loadFile",value:function(t){return new Promise(function(e,a){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){200===n.status?e(n.response):a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})}}]),t}();e.default=o},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),u=a(23),l=function(t){return t&&t.__esModule?t:{default:t}}(u),s=a(5),c=function(t){function e(t){n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.type=i.BASIC_MATERIAL,a.color=s.color.convert(t&&t.color||16777215),a}return o(e,t),e}(l.default);e.default=c},function(t,e,a){"use strict";function n(t,e,a){var n=t.createShader(a);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(n);console.error("Error compiling shader",r),t.deleteShader(n)}return n}Object.defineProperty(e,"__esModule",{value:!0});e.createProgram=function(t,e,a){var r=n(t,e,t.VERTEX_SHADER),o=n(t,a,t.FRAGMENT_SHADER),i=t.createProgram();return t.attachShader(i,r),t.attachShader(i,o),t.linkProgram(i),i}},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(2),i=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t);var r=(0,o.getContext)();this.boundLocation=a,this.data=new Float32Array(e),this.buffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.buffer),r.bufferData(r.UNIFORM_BUFFER,this.data,r.DYNAMIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null)}return r(t,[{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(0,o.getContext)();this.data.set(t,e),a.bindBuffer(a.UNIFORM_BUFFER,this.buffer),a.bufferSubData(a.UNIFORM_BUFFER,0,this.data,0,null),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,this.boundLocation,this.buffer)}}]),t}();e.default=i},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(2),i=function(){function t(){n(this,t);var e=(0,o.getContext)();this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)}return r(t,[{key:"bind",value:function(){(0,o.getContext)().bindVertexArray(this.vao)}},{key:"unbind",value:function(){(0,o.getContext)().bindVertexArray(null)}},{key:"destroy",value:function(){(0,o.getContext)().deleteVertexArray(this.vao),this.vao=null}}]),t}();e.default=i},function(t,e,a){"use strict";function n(t){return s.vec3.fromValues(t[0]/255,t[1]/255,t[2]/255)}function r(t){var e=t>>16,a=t>>8&255,n=255&t;return s.vec3.fromValues(e,a,n)}function o(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?s.vec3.fromValues(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function i(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function u(t,e,a){return"#"+i(t)+i(e)+i(a)}function l(t){var e=s.vec3.create(),a="number"==typeof t?r(t):o(t);return s.vec3.copy(e,n(a)),s.vec4.fromValues(e[0],e[1],e[2],1)}Object.defineProperty(e,"__esModule",{value:!0}),e.hexIntToRgb=r,e.hexStringToRgb=o,e.componentToHex=i,e.rgbToHex=u,e.convert=l;var s=a(1)},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=r,o},r.set=function(t,e,a,n,r){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t},r.transpose=function(t,e){if(t===e){var a=e[1];t[1]=e[2],t[2]=a}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*o-r*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-r*i,t[3]=a*i,t):null},r.adjoint=function(t,e){var a=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=a,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=a[0],l=a[1],s=a[2],c=a[3];return t[0]=n*u+o*l,t[1]=r*u+i*l,t[2]=n*s+o*c,t[3]=r*s+i*c,t},r.mul=r.multiply,r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=Math.sin(a),l=Math.cos(a);return t[0]=n*l+o*u,t[1]=r*l+i*u,t[2]=n*-u+o*l,t[3]=r*-u+i*l,t},r.scale=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=a[0],l=a[1];return t[0]=n*u,t[1]=r*u,t[2]=o*l,t[3]=i*l,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,e,a,n){return t[2]=n[2]/n[0],a[0]=n[0],a[1]=n[1],a[3]=n[3]-t[2]*a[1],[t,e,a]},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},r.sub=r.subtract,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,a,r,o,i){var u=new n.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=a,u[3]=r,u[4]=o,u[5]=i,u},r.set=function(t,e,a,n,r,o,i){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=a*o-n*r;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-r*l,t[3]=a*l,t[4]=(r*u-o*i)*l,t[5]=(n*i-a*u)*l,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=a[0],c=a[1],f=a[2],h=a[3],M=a[4],d=a[5];return t[0]=n*s+o*c,t[1]=r*s+i*c,t[2]=n*f+o*h,t[3]=r*f+i*h,t[4]=n*M+o*d+u,t[5]=r*M+i*d+l,t},r.mul=r.multiply,r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(a),c=Math.cos(a);return t[0]=n*c+o*s,t[1]=r*c+i*s,t[2]=n*-s+o*c,t[3]=r*-s+i*c,t[4]=u,t[5]=l,t},r.scale=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=a[0],c=a[1];return t[0]=n*s,t[1]=r*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},r.translate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=a[0],c=a[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=n*s+o*c+u,t[5]=r*s+i*c+l,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],f=e[2],h=e[3],M=e[4],d=e[5];return Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-d)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))},t.exports=r},function(t,e,a){var n=a(0),r={scalar:{},SIMD:{}};r.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,a,r,o,i,u,l,s,c,f,h,M,d,v,m){var x=new n.ARRAY_TYPE(16);return x[0]=t,x[1]=e,x[2]=a,x[3]=r,x[4]=o,x[5]=i,x[6]=u,x[7]=l,x[8]=s,x[9]=c,x[10]=f,x[11]=h,x[12]=M,x[13]=d,x[14]=v,x[15]=m,x},r.set=function(t,e,a,n,r,o,i,u,l,s,c,f,h,M,d,v,m){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=M,t[13]=d,t[14]=v,t[15]=m,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.scalar.transpose=function(t,e){if(t===e){var a=e[1],n=e[2],r=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=a,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},r.SIMD.transpose=function(t,e){var a,n,r,o,i,u,l,s,c,f;return a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(a,n,0,1,4,5),u=SIMD.Float32x4.shuffle(r,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(a,n,2,3,6,7),u=SIMD.Float32x4.shuffle(r,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,f),t},r.transpose=n.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],v=e[13],m=e[14],x=e[15],p=a*u-n*i,S=a*l-r*i,b=a*s-o*i,I=n*l-r*u,D=n*s-o*u,F=r*s-o*l,y=c*v-f*d,g=c*m-h*d,w=c*x-M*d,E=f*m-h*v,_=f*x-M*v,O=h*x-M*m,P=p*O-S*_+b*E+I*w-D*g+F*y;return P?(P=1/P,t[0]=(u*O-l*_+s*E)*P,t[1]=(r*_-n*O-o*E)*P,t[2]=(v*F-m*D+x*I)*P,t[3]=(h*D-f*F-M*I)*P,t[4]=(l*w-i*O-s*g)*P,t[5]=(a*O-r*w+o*g)*P,t[6]=(m*b-d*F-x*S)*P,t[7]=(c*F-h*b+M*S)*P,t[8]=(i*_-u*w+s*y)*P,t[9]=(n*w-a*_-o*y)*P,t[10]=(d*D-v*b+x*p)*P,t[11]=(f*b-c*D-M*p)*P,t[12]=(u*g-i*E-l*y)*P,t[13]=(a*E-n*g+r*y)*P,t[14]=(v*S-d*I-m*p)*P,t[15]=(c*I-f*S+h*p)*P,t):null},r.SIMD.invert=function(t,e){var a,n,r,o,i,u,l,s,c,f,h=SIMD.Float32x4.load(e,0),M=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(h,M,0,1,4,5),n=SIMD.Float32x4.shuffle(d,v,0,1,4,5),a=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,M,2,3,6,7),o=SIMD.Float32x4.shuffle(d,v,2,3,6,7),r=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(n,i),l=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(a,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),c),f=SIMD.Float32x4.mul(a,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,c)),t):null},r.invert=n.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],v=e[13],m=e[14],x=e[15];return t[0]=u*(h*x-M*m)-f*(l*x-s*m)+v*(l*M-s*h),t[1]=-(n*(h*x-M*m)-f*(r*x-o*m)+v*(r*M-o*h)),t[2]=n*(l*x-s*m)-u*(r*x-o*m)+v*(r*s-o*l),t[3]=-(n*(l*M-s*h)-u*(r*M-o*h)+f*(r*s-o*l)),t[4]=-(i*(h*x-M*m)-c*(l*x-s*m)+d*(l*M-s*h)),t[5]=a*(h*x-M*m)-c*(r*x-o*m)+d*(r*M-o*h),t[6]=-(a*(l*x-s*m)-i*(r*x-o*m)+d*(r*s-o*l)),t[7]=a*(l*M-s*h)-i*(r*M-o*h)+c*(r*s-o*l),t[8]=i*(f*x-M*v)-c*(u*x-s*v)+d*(u*M-s*f),t[9]=-(a*(f*x-M*v)-c*(n*x-o*v)+d*(n*M-o*f)),t[10]=a*(u*x-s*v)-i*(n*x-o*v)+d*(n*s-o*u),t[11]=-(a*(u*M-s*f)-i*(n*M-o*f)+c*(n*s-o*u)),t[12]=-(i*(f*m-h*v)-c*(u*m-l*v)+d*(u*h-l*f)),t[13]=a*(f*m-h*v)-c*(n*m-r*v)+d*(n*h-r*f),t[14]=-(a*(u*m-l*v)-i*(n*m-r*v)+d*(n*l-r*u)),t[15]=a*(u*h-l*f)-i*(n*h-r*f)+c*(n*l-r*u),t},r.SIMD.adjoint=function(t,e){var a,n,r,o,i,u,l,s,c,f,h,M,d,a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(a,n,0,1,4,5),u=SIMD.Float32x4.shuffle(r,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(a,n,2,3,6,7),s=SIMD.Float32x4.shuffle(r,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,d),t},r.adjoint=n.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(t){var e=t[0],a=t[1],n=t[2],r=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],M=t[12],d=t[13],v=t[14],m=t[15];return(e*i-a*o)*(f*m-h*v)-(e*u-n*o)*(c*m-h*d)+(e*l-r*o)*(c*v-f*d)+(a*u-n*i)*(s*m-h*M)-(a*l-r*i)*(s*v-f*M)+(n*l-r*u)*(s*d-c*M)},r.SIMD.multiply=function(t,e,a){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(a,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(a,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var f=SIMD.Float32x4.load(a,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(t,8,h);var M=SIMD.Float32x4.load(a,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,d),t},r.scalar.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],M=e[10],d=e[11],v=e[12],m=e[13],x=e[14],p=e[15],S=a[0],b=a[1],I=a[2],D=a[3];return t[0]=S*n+b*u+I*f+D*v,t[1]=S*r+b*l+I*h+D*m,t[2]=S*o+b*s+I*M+D*x,t[3]=S*i+b*c+I*d+D*p,S=a[4],b=a[5],I=a[6],D=a[7],t[4]=S*n+b*u+I*f+D*v,t[5]=S*r+b*l+I*h+D*m,t[6]=S*o+b*s+I*M+D*x,t[7]=S*i+b*c+I*d+D*p,S=a[8],b=a[9],I=a[10],D=a[11],t[8]=S*n+b*u+I*f+D*v,t[9]=S*r+b*l+I*h+D*m,t[10]=S*o+b*s+I*M+D*x,t[11]=S*i+b*c+I*d+D*p,S=a[12],b=a[13],I=a[14],D=a[15],t[12]=S*n+b*u+I*f+D*v,t[13]=S*r+b*l+I*h+D*m,t[14]=S*o+b*s+I*M+D*x,t[15]=S*i+b*c+I*d+D*p,t},r.multiply=n.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(t,e,a){var n,r,o,i,u,l,s,c,f,h,M,d,v=a[0],m=a[1],x=a[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*x+e[12],t[13]=e[1]*v+e[5]*m+e[9]*x+e[13],t[14]=e[2]*v+e[6]*m+e[10]*x+e[14],t[15]=e[3]*v+e[7]*m+e[11]*x+e[15]):(n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],M=e[10],d=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=f,t[9]=h,t[10]=M,t[11]=d,t[12]=n*v+u*m+f*x+e[12],t[13]=r*v+l*m+h*x+e[13],t[14]=o*v+s*m+M*x+e[14],t[15]=i*v+c*m+d*x+e[15]),t},r.SIMD.translate=function(t,e,a){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(a[0],a[1],a[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},r.translate=n.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(t,e,a){var n=a[0],r=a[1],o=a[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.SIMD.scale=function(t,e,a){var n,r,o,i=SIMD.Float32x4(a[0],a[1],a[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),r=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.scale=n.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(t,e,a,r){var o,i,u,l,s,c,f,h,M,d,v,m,x,p,S,b,I,D,F,y,g,w,E,_,O=r[0],P=r[1],A=r[2],z=Math.sqrt(O*O+P*P+A*A);return Math.abs(z)<n.EPSILON?null:(z=1/z,O*=z,P*=z,A*=z,o=Math.sin(a),i=Math.cos(a),u=1-i,l=e[0],s=e[1],c=e[2],f=e[3],h=e[4],M=e[5],d=e[6],v=e[7],m=e[8],x=e[9],p=e[10],S=e[11],b=O*O*u+i,I=P*O*u+A*o,D=A*O*u-P*o,F=O*P*u-A*o,y=P*P*u+i,g=A*P*u+O*o,w=O*A*u+P*o,E=P*A*u-O*o,_=A*A*u+i,t[0]=l*b+h*I+m*D,t[1]=s*b+M*I+x*D,t[2]=c*b+d*I+p*D,t[3]=f*b+v*I+S*D,t[4]=l*F+h*y+m*g,t[5]=s*F+M*y+x*g,t[6]=c*F+d*y+p*g,t[7]=f*F+v*y+S*g,t[8]=l*w+h*E+m*_,t[9]=s*w+M*E+x*_,t[10]=c*w+d*E+p*_,t[11]=f*w+v*E+S*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},r.scalar.rotateX=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+s*n,t[5]=i*r+c*n,t[6]=u*r+f*n,t[7]=l*r+h*n,t[8]=s*r-o*n,t[9]=c*r-i*n,t[10]=f*r-u*n,t[11]=h*r-l*n,t},r.SIMD.rotateX=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),t},r.rotateX=n.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-s*n,t[1]=i*r-c*n,t[2]=u*r-f*n,t[3]=l*r-h*n,t[8]=o*n+s*r,t[9]=i*n+c*r,t[10]=u*n+f*r,t[11]=l*n+h*r,t},r.SIMD.rotateY=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),t},r.rotateY=n.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+s*n,t[1]=i*r+c*n,t[2]=u*r+f*n,t[3]=l*r+h*n,t[4]=s*r-o*n,t[5]=c*r-i*n,t[6]=f*r-u*n,t[7]=h*r-l*n,t},r.SIMD.rotateZ=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),t},r.rotateZ=n.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,a){var r,o,i,u=a[0],l=a[1],s=a[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<n.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,r=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*r,t[2]=s*u*i-l*r,t[3]=0,t[4]=u*l*i-s*r,t[5]=l*l*i+o,t[6]=s*l*i+u*r,t[7]=0,t[8]=u*s*i+l*r,t[9]=l*s*i-u*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=n+n,l=r+r,s=o+o,c=n*u,f=n*l,h=n*s,M=r*l,d=r*s,v=o*s,m=i*u,x=i*l,p=i*s;return t[0]=1-(M+v),t[1]=f+p,t[2]=h-x,t[3]=0,t[4]=f-p,t[5]=1-(c+v),t[6]=d+m,t[7]=0,t[8]=h+x,t[9]=d-m,t[10]=1-(c+M),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getRotation=function(t,e){var a=e[0]+e[5]+e[10],n=0;return a>0?(n=2*Math.sqrt(a+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},r.fromRotationTranslationScale=function(t,e,a,n){var r=e[0],o=e[1],i=e[2],u=e[3],l=r+r,s=o+o,c=i+i,f=r*l,h=r*s,M=r*c,d=o*s,v=o*c,m=i*c,x=u*l,p=u*s,S=u*c,b=n[0],I=n[1],D=n[2];return t[0]=(1-(d+m))*b,t[1]=(h+S)*b,t[2]=(M-p)*b,t[3]=0,t[4]=(h-S)*I,t[5]=(1-(f+m))*I,t[6]=(v+x)*I,t[7]=0,t[8]=(M+p)*D,t[9]=(v-x)*D,t[10]=(1-(f+d))*D,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,a,n,r){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,f=u+u,h=o*s,M=o*c,d=o*f,v=i*c,m=i*f,x=u*f,p=l*s,S=l*c,b=l*f,I=n[0],D=n[1],F=n[2],y=r[0],g=r[1],w=r[2];return t[0]=(1-(v+x))*I,t[1]=(M+b)*I,t[2]=(d-S)*I,t[3]=0,t[4]=(M-b)*D,t[5]=(1-(h+x))*D,t[6]=(m+p)*D,t[7]=0,t[8]=(d+S)*F,t[9]=(m-p)*F,t[10]=(1-(h+v))*F,t[11]=0,t[12]=a[0]+y-(t[0]*y+t[4]*g+t[8]*w),t[13]=a[1]+g-(t[1]*y+t[5]*g+t[9]*w),t[14]=a[2]+w-(t[2]*y+t[6]*g+t[10]*w),t[15]=1,t},r.fromQuat=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a+a,u=n+n,l=r+r,s=a*i,c=n*i,f=n*u,h=r*i,M=r*u,d=r*l,v=o*i,m=o*u,x=o*l;return t[0]=1-f-d,t[1]=c+x,t[2]=h-m,t[3]=0,t[4]=c-x,t[5]=1-s-d,t[6]=M+v,t[7]=0,t[8]=h+m,t[9]=M-v,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,a,n,r,o,i){var u=1/(a-e),l=1/(r-n),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(a+e)*u,t[9]=(r+n)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},r.perspective=function(t,e,a,n,r){var o=1/Math.tan(e/2),i=1/(n-r);return t[0]=o/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*i,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,e,a,n){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(r+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*l*.5,t[9]=(r-o)*s*.5,t[10]=n/(a-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a/(a-n),t[15]=0,t},r.ortho=function(t,e,a,n,r,o,i){var u=1/(e-a),l=1/(n-r),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+a)*u,t[13]=(r+n)*l,t[14]=(i+o)*s,t[15]=1,t},r.lookAt=function(t,e,a,o){var i,u,l,s,c,f,h,M,d,v,m=e[0],x=e[1],p=e[2],S=o[0],b=o[1],I=o[2],D=a[0],F=a[1],y=a[2];return Math.abs(m-D)<n.EPSILON&&Math.abs(x-F)<n.EPSILON&&Math.abs(p-y)<n.EPSILON?r.identity(t):(h=m-D,M=x-F,d=p-y,v=1/Math.sqrt(h*h+M*M+d*d),h*=v,M*=v,d*=v,i=b*d-I*M,u=I*h-S*d,l=S*M-b*h,v=Math.sqrt(i*i+u*u+l*l),v?(v=1/v,i*=v,u*=v,l*=v):(i=0,u=0,l=0),s=M*l-d*u,c=d*i-h*l,f=h*u-M*i,v=Math.sqrt(s*s+c*c+f*f),v?(v=1/v,s*=v,c*=v,f*=v):(s=0,c=0,f=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=u,t[5]=c,t[6]=M,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=-(i*m+u*x+l*p),t[13]=-(s*m+c*x+f*p),t[14]=-(h*m+M*x+d*p),t[15]=1,t)},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t[9]=e[9]+a[9],t[10]=e[10]+a[10],t[11]=e[11]+a[11],t[12]=e[12]+a[12],t[13]=e[13]+a[13],t[14]=e[14]+a[14],t[15]=e[15]+a[15],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t[9]=e[9]-a[9],t[10]=e[10]-a[10],t[11]=e[11]-a[11],t[12]=e[12]-a[12],t[13]=e[13]-a[13],t[14]=e[14]-a[14],t[15]=e[15]-a[15],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12]*a,t[13]=e[13]*a,t[14]=e[14]*a,t[15]=e[15]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t[9]=e[9]+a[9]*n,t[10]=e[10]+a[10]*n,t[11]=e[11]+a[11]*n,t[12]=e[12]+a[12]*n,t[13]=e[13]+a[13]*n,t[14]=e[14]+a[14]*n,t[15]=e[15]+a[15]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],M=t[10],d=t[11],v=t[12],m=t[13],x=t[14],p=t[15],S=e[0],b=e[1],I=e[2],D=e[3],F=e[4],y=e[5],g=e[6],w=e[7],E=e[8],_=e[9],O=e[10],P=e[11],A=e[12],z=e[13],R=e[14],j=e[15];return Math.abs(a-S)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(r-b)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-I)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(i-D)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(u-F)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(l-y)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-w)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-E)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-_)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(M-O)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(d-P)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(v-A)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(m-z)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(x-R)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(p-j)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(j))},t.exports=r},function(t,e,a){var n=a(0),r=a(8),o=a(9),i=a(10),u={};u.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),a=o.fromValues(0,1,0);return function(n,r,i){var l=o.dot(r,i);return l<-.999999?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,a,r),o.normalize(t,t),u.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,r,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,u.normalize(n,n))}}(),u.setAxes=function(){var t=r.create();return function(e,a,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-a[0],t[5]=-a[1],t[8]=-a[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,a){a*=.5;var n=Math.sin(a);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(a),t},u.getAxisAngle=function(t,e){var a=2*Math.acos(e[3]),n=Math.sin(a/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),a},u.add=i.add,u.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],u=a[0],l=a[1],s=a[2],c=a[3];return t[0]=n*c+i*u+r*s-o*l,t[1]=r*c+i*l+o*u-n*s,t[2]=o*c+i*s+n*l-r*u,t[3]=i*c-n*u-r*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],u=Math.sin(a),l=Math.cos(a);return t[0]=n*l+i*u,t[1]=r*l+o*u,t[2]=o*l-r*u,t[3]=i*l-n*u,t},u.rotateY=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],u=Math.sin(a),l=Math.cos(a);return t[0]=n*l-o*u,t[1]=r*l+i*u,t[2]=o*l+n*u,t[3]=i*l-r*u,t},u.rotateZ=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],u=Math.sin(a),l=Math.cos(a);return t[0]=n*l+r*u,t[1]=r*l-n*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,e){var a=e[0],n=e[1],r=e[2];return t[0]=a,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-a*a-n*n-r*r)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,a,n){var r,o,i,u,l,s=e[0],c=e[1],f=e[2],h=e[3],M=a[0],d=a[1],v=a[2],m=a[3];return o=s*M+c*d+f*v+h*m,o<0&&(o=-o,M=-M,d=-d,v=-v,m=-m),1-o>1e-6?(r=Math.acos(o),i=Math.sin(r),u=Math.sin((1-n)*r)/i,l=Math.sin(n*r)/i):(u=1-n,l=n),t[0]=u*s+l*M,t[1]=u*c+l*d,t[2]=u*f+l*v,t[3]=u*h+l*m,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(a,n,r,o,i,l){return u.slerp(t,n,i,l),u.slerp(e,r,o,l),u.slerp(a,t,e,2*l*(1-l)),a}}(),u.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*a+n*n+r*r+o*o,u=i?1/i:0;return t[0]=-a*u,t[1]=-n*u,t[2]=-r*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var a,n=e[0]+e[4]+e[8];if(n>0)a=Math.sqrt(n+1),t[3]=.5*a,a=.5/a,t[0]=(e[5]-e[7])*a,t[1]=(e[6]-e[2])*a,t[2]=(e[1]-e[3])*a;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,i=(r+2)%3;a=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*i+i]+1),t[r]=.5*a,a=.5/a,t[3]=(e[3*o+i]-e[3*i+o])*a,t[o]=(e[3*o+r]+e[3*r+o])*a,t[i]=(e[3*i+r]+e[3*r+i])*a}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var a=new n.ARRAY_TYPE(2);return a[0]=t,a[1]=e,a},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,a){return t[0]=e,t[1]=a,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(a*a+n*n)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1];return a*a+n*n},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1];return Math.sqrt(e*e+a*a)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1];return e*e+a*a},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=a*a+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,a){var n=e[0]*a[1]-e[1]*a[0];return t[0]=t[1]=0,t[2]=n,t},r.lerp=function(t,e,a,n){var r=e[0],o=e[1];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t},r.random=function(t,e){e=e||1;var a=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(a)*e,t[1]=Math.sin(a)*e,t},r.transformMat2=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[2]*r,t[1]=a[1]*n+a[3]*r,t},r.transformMat2d=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[2]*r+a[4],t[1]=a[1]*n+a[3]*r+a[5],t},r.transformMat3=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[3]*r+a[6],t[1]=a[1]*n+a[4]*r+a[7],t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[4]*r+a[12],t[1]=a[1]*n+a[5]*r+a[13],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var u,l;for(a||(a=2),n||(n=0),l=r?Math.min(r*a+n,e.length):e.length,u=n;u<l;u+=a)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var a=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},t.exports=r},function(t,e){e.vertexNormals=function(t,e,a){for(var n=e.length,r=new Array(n),o=void 0===a?1e-6:a,i=0;i<n;++i)r[i]=[0,0,0];for(var i=0;i<t.length;++i)for(var u=t[i],l=0,s=u[u.length-1],c=u[0],f=0;f<u.length;++f){l=s,s=c,c=u[(f+1)%u.length];for(var h=e[l],M=e[s],d=e[c],v=new Array(3),m=0,x=new Array(3),p=0,S=0;S<3;++S)v[S]=h[S]-M[S],m+=v[S]*v[S],x[S]=d[S]-M[S],p+=x[S]*x[S];if(m*p>o)for(var b=r[s],I=1/Math.sqrt(m*p),S=0;S<3;++S){var D=(S+1)%3,F=(S+2)%3;b[S]+=I*(x[D]*v[F]-x[F]*v[D])}}for(var i=0;i<n;++i){for(var b=r[i],y=0,S=0;S<3;++S)y+=b[S]*b[S];if(y>o)for(var I=1/Math.sqrt(y),S=0;S<3;++S)b[S]*=I;else for(var S=0;S<3;++S)b[S]=0}return r},e.faceNormals=function(t,e,a){for(var n=t.length,r=new Array(n),o=void 0===a?1e-6:a,i=0;i<n;++i){for(var u=t[i],l=new Array(3),s=0;s<3;++s)l[s]=e[u[s]];for(var c=new Array(3),f=new Array(3),s=0;s<3;++s)c[s]=l[1][s]-l[0][s],f[s]=l[2][s]-l[0][s];for(var h=new Array(3),M=0,s=0;s<3;++s){var d=(s+1)%3,v=(s+2)%3;h[s]=c[d]*f[v]-c[v]*f[d],M+=h[s]*h[s]}M=M>o?1/Math.sqrt(M):0;for(var s=0;s<3;++s)h[s]*=M;r[i]=h}return r}}])});